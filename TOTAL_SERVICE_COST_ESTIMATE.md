# システム全体のサービス消費金額概算

## 📊 使用しているサービス一覧

1. **Meta API** - 広告データ取得
2. **OpenAI API** - AI機能（分析レポート、コピー生成など）
3. **Resend** - メール送信（パスワードリセット、登録完了メールなど）
4. **Railway** - バックエンドホスティング + PostgreSQL
5. **Netlify** - フロントエンドホスティング
6. **ドメイン・メール** - お名前.com（ドメイン + メール）

---

## 💰 サービス別コスト詳細

### 1. Meta API

| 項目 | コスト |
|------|--------|
| **API利用料** | **¥0**（無料） |
| **レート制限** | 1時間あたり200-600リクエスト（無料） |
| **月間コスト** | **¥0** |

**備考**: Meta Marketing APIは完全無料です。

---

### 2. OpenAI API

#### 使用モデル
- **gpt-4o**: 主要なAI機能で使用
- **gpt-4o-mini**: 一部の機能で使用（バックエンド）

#### OpenAI API価格（2025年1月時点）
- **gpt-4o**: 
  - Input: $2.50 / 1M tokens
  - Output: $10.00 / 1M tokens
- **gpt-4o-mini**:
  - Input: $0.15 / 1M tokens
  - Output: $0.60 / 1M tokens

#### 各機能のトークン使用量（推定）

| 機能名 | モデル | Input推定 | Output推定 | 1回あたりコスト（USD） | 1回あたりコスト（円）* |
|--------|--------|-----------|------------|----------------------|---------------------|
| AI分析レポート | gpt-4o | 1,500 tokens | 1,200 tokens | $0.015 | 約2.25円 |
| ファネル分析 | gpt-4o | 800 tokens | 600 tokens | $0.008 | 約1.20円 |
| スマートレポート生成 | gpt-4o | 2,000 tokens | 1,500 tokens | $0.020 | 約3.00円 |
| 広告コピー生成 | gpt-4o | 500 tokens | 400 tokens | $0.005 | 約0.75円 |
| クリエイティブ診断 | gpt-4o | 1,200 tokens | 800 tokens | $0.011 | 約1.65円 |
| 異常検知 | gpt-4o | 1,000 tokens | 700 tokens | $0.009 | 約1.35円 |
| ペルソナ生成 | gpt-4o | 600 tokens | 500 tokens | $0.006 | 約0.90円 |
| キーワード提案 | gpt-4o | 400 tokens | 300 tokens | $0.004 | 約0.60円 |
| 競合リサーチ | gpt-4o | 1,500 tokens | 1,200 tokens | $0.015 | 約2.25円 |
| LP分析 | gpt-4o | 1,000 tokens | 800 tokens | $0.009 | 約1.35円 |
| ポリシーチェック | gpt-4o | 800 tokens | 600 tokens | $0.008 | 約1.20円 |
| ABテスト判定 | gpt-4o | 600 tokens | 500 tokens | $0.006 | 約0.90円 |
| 予算最適化 | gpt-4o | 700 tokens | 600 tokens | $0.007 | 約1.05円 |
| 利益シミュレーター | gpt-4o | 500 tokens | 400 tokens | $0.005 | 約0.75円 |
| ジャーニーマップ | gpt-4o | 1,200 tokens | 1,000 tokens | $0.011 | 約1.65円 |

**平均**: 約1回あたり **$0.009** (約1.35円)

*1 USD = 150円で計算

#### 月間コスト試算（使用頻度別）

| 使用パターン | AI分析回数/月 | 月間コスト（USD） | 月間コスト（円） |
|-------------|--------------|------------------|------------------|
| 軽量利用 | 50回 | $0.45 | 約68円 |
| 標準利用 | 200回 | $1.80 | 約270円 |
| 積極利用 | 500回 | $4.50 | 約675円 |
| ヘビー利用 | 1,000回 | $9.00 | 約1,350円 |
| エンタープライズ | 5,000回 | $45.00 | 約6,750円 |

---

### 3. Resend（メール送信）

#### 料金プラン

| プラン | 月間送信数 | 月額料金（USD） | 月額料金（円）* |
|--------|-----------|----------------|----------------|
| **無料プラン** | 3,000通まで | $0 | **¥0** |
| **Proプラン** | 50,000通まで | $20 | 約3,000円 |
| **Businessプラン** | 100,000通まで | $80 | 約12,000円 |

*1 USD = 150円で計算

#### メール送信頻度（推定）

| メール種別 | 送信頻度 | 月間送信数（1ユーザーあたり） |
|-----------|---------|---------------------------|
| 新規登録完了メール | 1回/ユーザー | 1通 |
| パスワードリセット | 必要時のみ | 0.1通（月1回の10%） |
| 2FA認証コード | ログイン時 | 10通（月10回ログイン） |
| **合計** | - | **約11.1通/ユーザー/月** |

#### 月間コスト試算（ユーザー数別）

| ユーザー数 | 月間送信数 | 必要なプラン | 月額コスト（円） |
|-----------|-----------|-------------|----------------|
| 1-270ユーザー | 3,000通以下 | 無料プラン | **¥0** |
| 271-4,500ユーザー | 3,001-50,000通 | Proプラン | **¥3,000** |
| 4,501-9,000ユーザー | 50,001-100,000通 | Businessプラン | **¥12,000** |

**備考**: 現在の使用状況では、無料プラン（3,000通/月）で十分です。

---

### 4. Railway（バックエンドホスティング + PostgreSQL）

#### 料金プラン

| プラン | CPU | メモリ | 月額料金（USD） | 月額料金（円）* |
|--------|-----|--------|----------------|----------------|
| **Starter** | 0.5 vCPU | 512MB | $5 | 約750円 |
| **Developer** | 1 vCPU | 2GB | $10 | 約1,500円 |
| **Pro** | 2 vCPU | 4GB | $20 | 約3,000円 |

*1 USD = 150円で計算

#### PostgreSQL（Railwayに含まれる）

| プラン | ストレージ | 月額料金 |
|--------|-----------|---------|
| **Starter** | 1GB | 含まれる |
| **Developer** | 5GB | 含まれる |
| **Pro** | 20GB | 含まれる |

#### 月間コスト試算（ユーザー数別）

| ユーザー数 | 推奨プラン | 月額コスト（円） |
|-----------|-----------|----------------|
| 1-50ユーザー | Starter | **¥750** |
| 51-200ユーザー | Developer | **¥1,500** |
| 201-1,000ユーザー | Pro | **¥3,000** |

**備考**: 現在の使用状況では、Starterプラン（¥750/月）で十分です。

---

### 5. Netlify（フロントエンドホスティング）

#### 料金プラン

| プラン | 月間ビルド数 | 月額料金（USD） | 月額料金（円）* |
|--------|------------|----------------|----------------|
| **無料プラン** | 300ビルド/月 | $0 | **¥0** |
| **Proプラン** | 1,000ビルド/月 | $19 | 約2,900円 |
| **Businessプラン** | 無制限 | $99 | 約14,850円 |

*1 USD = 150円で計算

#### 月間コスト試算

| 使用パターン | 月間ビルド数 | 必要なプラン | 月額コスト（円） |
|-------------|------------|-------------|----------------|
| 小規模 | 300ビルド以下 | 無料プラン | **¥0** |
| 中規模 | 301-1,000ビルド | Proプラン | **¥2,900** |
| 大規模 | 1,001ビルド以上 | Businessプラン | **¥14,850** |

**備考**: 現在の使用状況では、無料プラン（300ビルド/月）で十分です。

---

### 6. ドメイン・メール（お名前.com）

| 項目 | 料金 |
|------|------|
| **ドメイン** | 約1,200円/年（約100円/月） |
| **メール** | 約440円/月 |
| **合計** | **約540円/月** |

**備考**: 既に取得済みのドメインとメールを使用しています。

---

## 📊 総合コスト試算（ユーザー数別）

### ケース1: 小規模（10ユーザー）

| サービス | 月額コスト（円） |
|---------|----------------|
| Meta API | ¥0 |
| OpenAI API（標準利用: 200回/月） | ¥270 |
| Resend（無料プラン） | ¥0 |
| Railway（Starter） | ¥750 |
| Netlify（無料プラン） | ¥0 |
| ドメイン・メール | ¥540 |
| **合計** | **¥1,560/月** |

---

### ケース2: 中規模（100ユーザー）

| サービス | 月額コスト（円） |
|---------|----------------|
| Meta API | ¥0 |
| OpenAI API（積極利用: 500回/月） | ¥675 |
| Resend（無料プラン: 1,110通/月） | ¥0 |
| Railway（Developer） | ¥1,500 |
| Netlify（無料プラン） | ¥0 |
| ドメイン・メール | ¥540 |
| **合計** | **¥2,715/月** |

---

### ケース3: 大規模（500ユーザー）

| サービス | 月額コスト（円） |
|---------|----------------|
| Meta API | ¥0 |
| OpenAI API（ヘビー利用: 1,000回/月） | ¥1,350 |
| Resend（Proプラン: 5,550通/月） | ¥3,000 |
| Railway（Pro） | ¥3,000 |
| Netlify（Proプラン） | ¥2,900 |
| ドメイン・メール | ¥540 |
| **合計** | **¥10,790/月** |

---

### ケース4: エンタープライズ（1,000ユーザー）

| サービス | 月額コスト（円） |
|---------|----------------|
| Meta API | ¥0 |
| OpenAI API（エンタープライズ: 5,000回/月） | ¥6,750 |
| Resend（Proプラン: 11,100通/月） | ¥3,000 |
| Railway（Pro） | ¥3,000 |
| Netlify（Proプラン） | ¥2,900 |
| ドメイン・メール | ¥540 |
| **合計** | **¥16,190/月** |

---

## 💡 コスト最適化の提案

### 1. OpenAI APIコスト削減

- **gpt-4o-miniの活用**: 一部の機能でgpt-4o-miniを使用（コスト1/10）
- **キャッシング**: 同じデータの再分析を避ける
- **バッチ処理**: 複数の分析をまとめて実行
- **使用頻度制限**: プランに応じた制限を実装

### 2. インフラコスト削減

- **Railway**: 必要に応じてプランを段階的にアップグレード
- **Netlify**: 無料プランで運用可能な限り使用
- **Resend**: 無料プラン（3,000通/月）で運用可能な限り使用

### 3. メール送信の最適化

- **2FAのスキップ**: 特定のユーザーは2FAをスキップ（既に実装済み）
- **メール送信の最適化**: 不要なメール送信を削減

---

## 📈 コスト内訳の特徴

### 固定費（ユーザー数に関係なく発生）

| サービス | 月額コスト（円） |
|---------|----------------|
| Railway（Starter） | ¥750 |
| ドメイン・メール | ¥540 |
| **合計（固定費）** | **¥1,290/月** |

### 変動費（ユーザー数・使用頻度に応じて変動）

| サービス | 変動要因 | 月額コスト範囲（円） |
|---------|---------|-------------------|
| OpenAI API | AI機能の使用頻度 | ¥68 - ¥6,750 |
| Resend | メール送信数 | ¥0 - ¥3,000 |
| Railway | ユーザー数・負荷 | ¥750 - ¥3,000 |
| Netlify | ビルド数 | ¥0 - ¥2,900 |

---

## 🎯 推奨事項

### 初期段階（10-50ユーザー）
- **総コスト**: 約¥1,500-2,000/月
- **主なコスト**: Railway（¥750）+ OpenAI API（¥270-675）

### 成長段階（100-500ユーザー）
- **総コスト**: 約¥2,700-10,800/月
- **主なコスト**: Railway（¥1,500-3,000）+ OpenAI API（¥675-1,350）+ Resend（¥0-3,000）

### エンタープライズ段階（1,000ユーザー以上）
- **総コスト**: 約¥16,000/月以上
- **主なコスト**: OpenAI API（¥6,750以上）が最大のコスト

---

## 📝 注意事項

1. **為替レート**: 1 USD = 150円で計算（変動あり）
2. **OpenAI価格**: 2025年1月時点の価格（変更の可能性あり）
3. **使用頻度**: 実際の使用状況により変動
4. **スケーリング**: 規模に応じてコストは線形に増加
5. **無料プラン**: Resend、Netlifyは無料プランで運用可能な限り使用

---

## 🎉 まとめ

### 最小コスト（小規模運用）
- **月額**: 約¥1,500-2,000
- **内訳**: Railway（¥750）+ OpenAI API（¥270）+ ドメイン・メール（¥540）

### 標準コスト（中規模運用）
- **月額**: 約¥2,700-3,000
- **内訳**: Railway（¥1,500）+ OpenAI API（¥675）+ ドメイン・メール（¥540）

### 最大コスト（エンタープライズ運用）
- **月額**: 約¥16,000以上
- **内訳**: Railway（¥3,000）+ OpenAI API（¥6,750）+ Resend（¥3,000）+ Netlify（¥2,900）+ ドメイン・メール（¥540）

**主なコスト要因**: OpenAI APIが最大のコスト要因です。使用頻度に応じてコストが大きく変動します。

