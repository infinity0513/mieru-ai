# Meta OAuth認証設定ガイド（実践版）

## 前提条件
- Meta（Facebook）アカウントを持っていること
- 広告アカウントを持っていること（または作成できること）

---

## ステップ1: Meta for Developersにアクセス

1. ブラウザで以下のURLを開く：
   ```
   https://developers.facebook.com/apps/
   ```

2. Metaアカウントでログインしていない場合は、ログインする

---

## ステップ2: アプリを作成

1. ページ右上の「**アプリを作成**」ボタンをクリック
   - 青いボタンです

2. ポップアップが表示されるので：
   - 「**ビジネス**」を選択
   - 「**次へ**」をクリック

3. アプリ情報を入力：
   - **アプリ名**: 例「MIERU AI」など、任意の名前
   - **アプリの連絡先メール**: あなたのメールアドレス
   - **ビジネスアカウント**: 既存のものを選択、または「新規作成」をクリック

4. 「**アプリを作成**」ボタンをクリック

5. セキュリティチェック（CAPTCHA）が表示されたら、完了する

---

## ステップ3: App IDをコピー

1. アプリダッシュボードが表示される
2. 左側のメニューから「**設定**」をクリック
3. 「**基本設定**」をクリック（設定の下に表示される）
4. ページ上部の「**基本**」セクションに「**アプリID**」が表示される
5. アプリIDの数字をコピー（例: `1234567890123456`）
   - この数字をメモ帳などに保存しておく

---

## ステップ4: App Secretを取得

1. 同じ「基本設定」ページで、下にスクロール
2. 「**アプリシークレット**」というセクションを見つける
3. 「**表示**」ボタンをクリック
4. パスワードを入力して「**送信**」をクリック
5. 表示された文字列をコピー（例: `a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6`）
   - ⚠️ **重要**: この値は一度しか表示されません。必ずメモ帳に保存してください

---

## ステップ5: Facebook Loginを追加

1. 左側のメニューから「**製品**」をクリック
2. 製品一覧の中から「**Facebook Login**」を見つける
3. 「**セットアップ**」ボタンをクリック
4. 設定画面が開く

---

## ステップ6: OAuth Redirect URIを設定

1. Facebook Loginの設定画面で、「**設定**」タブをクリック
2. ページを下にスクロールして「**クライアントOAuth設定**」セクションを見つける
3. 「**有効なOAuthリダイレクトURI**」という項目を見つける
4. テキストボックスに以下を入力：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
5. 「**変更を保存**」ボタンをクリック（ページ下部にある）

---

## ステップ7: 権限を追加

1. 左側のメニューから「**アプリレビュー**」をクリック
2. 「**権限と機能**」をクリック
3. 検索ボックスに「ads_read」と入力
4. 「**ads_read**」を見つけて、「**権限を追加**」ボタンをクリック
5. 同様に「ads_management」を検索して、「**権限を追加**」ボタンをクリック

**注意**: 開発モードでは、アプリの管理者のみがこれらの権限を使用できます。

---

## ステップ8: 環境変数を設定

1. プロジェクトの`backend`フォルダを開く
2. `.env`ファイルを開く（テキストエディタで）
3. ファイルの最後に以下を追加：

```bash
# Meta OAuth設定
META_APP_ID=ここにステップ3でコピーしたApp IDを貼り付け
META_APP_SECRET=ここにステップ4でコピーしたApp Secretを貼り付け
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

**例**:
```bash
# Meta OAuth設定
META_APP_ID=1234567890123456
META_APP_SECRET=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

4. ファイルを保存

---

## ステップ9: バックエンドサーバーを再起動

1. バックエンドサーバーが起動している場合は、停止する（Ctrl+C）
2. ターミナルで以下を実行：

```bash
cd backend
./venv/bin/python3 -m uvicorn app.main:app --host 127.0.0.1 --port 8000 --reload
```

3. サーバーが起動したことを確認（エラーが出ないこと）

---

## ステップ10: 動作確認

1. ブラウザで `http://localhost:3000` を開く
2. ログインする
3. 左側のメニューから「**設定**」をクリック
4. ページを下にスクロールして「**Meta広告アカウント連携**」セクションを見つける
5. 「**Metaでログインして連携**」という青いボタンをクリック
6. Metaのログイン画面が表示されることを確認
7. Metaアカウントでログイン
8. 「**続行**」または「**許可**」ボタンをクリック
9. 設定画面に戻り、「**Meta広告アカウントID**」の欄に`act_`で始まるIDが自動入力されていることを確認

---

## エラーが出た場合

### エラー: "Meta OAuthが設定されていません"

**やること**:
1. `backend/.env`ファイルを開く
2. `META_APP_ID=`の後に数字が入っているか確認
3. 入っていない場合は、ステップ8をやり直す
4. バックエンドサーバーを再起動（ステップ9）

### エラー: "Invalid redirect_uri"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「製品」→「Facebook Login」→「設定」を開く
3. 「有効なOAuthリダイレクトURI」に以下が**完全に一致**しているか確認：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
4. 一致していない場合は、正しく入力して「変更を保存」

### エラー: "Insufficient permissions"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「アプリレビュー」→「権限と機能」を開く
3. `ads_read`と`ads_management`が追加されているか確認
4. 追加されていない場合は、ステップ7をやり直す

### エラー: "広告アカウントが見つかりませんでした"

**やること**:
1. https://business.facebook.com/adsmanager/ にアクセス
2. 広告アカウントが存在するか確認
3. 存在しない場合は、広告アカウントを作成する

---

## 完了

これで設定は完了です。ユーザーは「Metaでログインして連携」ボタンをクリックするだけで、Metaアカウントを連携できるようになります。

## 前提条件
- Meta（Facebook）アカウントを持っていること
- 広告アカウントを持っていること（または作成できること）

---

## ステップ1: Meta for Developersにアクセス

1. ブラウザで以下のURLを開く：
   ```
   https://developers.facebook.com/apps/
   ```

2. Metaアカウントでログインしていない場合は、ログインする

---

## ステップ2: アプリを作成

1. ページ右上の「**アプリを作成**」ボタンをクリック
   - 青いボタンです

2. ポップアップが表示されるので：
   - 「**ビジネス**」を選択
   - 「**次へ**」をクリック

3. アプリ情報を入力：
   - **アプリ名**: 例「MIERU AI」など、任意の名前
   - **アプリの連絡先メール**: あなたのメールアドレス
   - **ビジネスアカウント**: 既存のものを選択、または「新規作成」をクリック

4. 「**アプリを作成**」ボタンをクリック

5. セキュリティチェック（CAPTCHA）が表示されたら、完了する

---

## ステップ3: App IDをコピー

1. アプリダッシュボードが表示される
2. 左側のメニューから「**設定**」をクリック
3. 「**基本設定**」をクリック（設定の下に表示される）
4. ページ上部の「**基本**」セクションに「**アプリID**」が表示される
5. アプリIDの数字をコピー（例: `1234567890123456`）
   - この数字をメモ帳などに保存しておく

---

## ステップ4: App Secretを取得

1. 同じ「基本設定」ページで、下にスクロール
2. 「**アプリシークレット**」というセクションを見つける
3. 「**表示**」ボタンをクリック
4. パスワードを入力して「**送信**」をクリック
5. 表示された文字列をコピー（例: `a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6`）
   - ⚠️ **重要**: この値は一度しか表示されません。必ずメモ帳に保存してください

---

## ステップ5: Facebook Loginを追加

1. 左側のメニューから「**製品**」をクリック
2. 製品一覧の中から「**Facebook Login**」を見つける
3. 「**セットアップ**」ボタンをクリック
4. 設定画面が開く

---

## ステップ6: OAuth Redirect URIを設定

1. Facebook Loginの設定画面で、「**設定**」タブをクリック
2. ページを下にスクロールして「**クライアントOAuth設定**」セクションを見つける
3. 「**有効なOAuthリダイレクトURI**」という項目を見つける
4. テキストボックスに以下を入力：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
5. 「**変更を保存**」ボタンをクリック（ページ下部にある）

---

## ステップ7: 権限を追加

1. 左側のメニューから「**アプリレビュー**」をクリック
2. 「**権限と機能**」をクリック
3. 検索ボックスに「ads_read」と入力
4. 「**ads_read**」を見つけて、「**権限を追加**」ボタンをクリック
5. 同様に「ads_management」を検索して、「**権限を追加**」ボタンをクリック

**注意**: 開発モードでは、アプリの管理者のみがこれらの権限を使用できます。

---

## ステップ8: 環境変数を設定

1. プロジェクトの`backend`フォルダを開く
2. `.env`ファイルを開く（テキストエディタで）
3. ファイルの最後に以下を追加：

```bash
# Meta OAuth設定
META_APP_ID=ここにステップ3でコピーしたApp IDを貼り付け
META_APP_SECRET=ここにステップ4でコピーしたApp Secretを貼り付け
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

**例**:
```bash
# Meta OAuth設定
META_APP_ID=1234567890123456
META_APP_SECRET=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

4. ファイルを保存

---

## ステップ9: バックエンドサーバーを再起動

1. バックエンドサーバーが起動している場合は、停止する（Ctrl+C）
2. ターミナルで以下を実行：

```bash
cd backend
./venv/bin/python3 -m uvicorn app.main:app --host 127.0.0.1 --port 8000 --reload
```

3. サーバーが起動したことを確認（エラーが出ないこと）

---

## ステップ10: 動作確認

1. ブラウザで `http://localhost:3000` を開く
2. ログインする
3. 左側のメニューから「**設定**」をクリック
4. ページを下にスクロールして「**Meta広告アカウント連携**」セクションを見つける
5. 「**Metaでログインして連携**」という青いボタンをクリック
6. Metaのログイン画面が表示されることを確認
7. Metaアカウントでログイン
8. 「**続行**」または「**許可**」ボタンをクリック
9. 設定画面に戻り、「**Meta広告アカウントID**」の欄に`act_`で始まるIDが自動入力されていることを確認

---

## エラーが出た場合

### エラー: "Meta OAuthが設定されていません"

**やること**:
1. `backend/.env`ファイルを開く
2. `META_APP_ID=`の後に数字が入っているか確認
3. 入っていない場合は、ステップ8をやり直す
4. バックエンドサーバーを再起動（ステップ9）

### エラー: "Invalid redirect_uri"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「製品」→「Facebook Login」→「設定」を開く
3. 「有効なOAuthリダイレクトURI」に以下が**完全に一致**しているか確認：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
4. 一致していない場合は、正しく入力して「変更を保存」

### エラー: "Insufficient permissions"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「アプリレビュー」→「権限と機能」を開く
3. `ads_read`と`ads_management`が追加されているか確認
4. 追加されていない場合は、ステップ7をやり直す

### エラー: "広告アカウントが見つかりませんでした"

**やること**:
1. https://business.facebook.com/adsmanager/ にアクセス
2. 広告アカウントが存在するか確認
3. 存在しない場合は、広告アカウントを作成する

---

## 完了

これで設定は完了です。ユーザーは「Metaでログインして連携」ボタンをクリックするだけで、Metaアカウントを連携できるようになります。

## 前提条件
- Meta（Facebook）アカウントを持っていること
- 広告アカウントを持っていること（または作成できること）

---

## ステップ1: Meta for Developersにアクセス

1. ブラウザで以下のURLを開く：
   ```
   https://developers.facebook.com/apps/
   ```

2. Metaアカウントでログインしていない場合は、ログインする

---

## ステップ2: アプリを作成

1. ページ右上の「**アプリを作成**」ボタンをクリック
   - 青いボタンです

2. ポップアップが表示されるので：
   - 「**ビジネス**」を選択
   - 「**次へ**」をクリック

3. アプリ情報を入力：
   - **アプリ名**: 例「MIERU AI」など、任意の名前
   - **アプリの連絡先メール**: あなたのメールアドレス
   - **ビジネスアカウント**: 既存のものを選択、または「新規作成」をクリック

4. 「**アプリを作成**」ボタンをクリック

5. セキュリティチェック（CAPTCHA）が表示されたら、完了する

---

## ステップ3: App IDをコピー

1. アプリダッシュボードが表示される
2. 左側のメニューから「**設定**」をクリック
3. 「**基本設定**」をクリック（設定の下に表示される）
4. ページ上部の「**基本**」セクションに「**アプリID**」が表示される
5. アプリIDの数字をコピー（例: `1234567890123456`）
   - この数字をメモ帳などに保存しておく

---

## ステップ4: App Secretを取得

1. 同じ「基本設定」ページで、下にスクロール
2. 「**アプリシークレット**」というセクションを見つける
3. 「**表示**」ボタンをクリック
4. パスワードを入力して「**送信**」をクリック
5. 表示された文字列をコピー（例: `a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6`）
   - ⚠️ **重要**: この値は一度しか表示されません。必ずメモ帳に保存してください

---

## ステップ5: Facebook Loginを追加

1. 左側のメニューから「**製品**」をクリック
2. 製品一覧の中から「**Facebook Login**」を見つける
3. 「**セットアップ**」ボタンをクリック
4. 設定画面が開く

---

## ステップ6: OAuth Redirect URIを設定

1. Facebook Loginの設定画面で、「**設定**」タブをクリック
2. ページを下にスクロールして「**クライアントOAuth設定**」セクションを見つける
3. 「**有効なOAuthリダイレクトURI**」という項目を見つける
4. テキストボックスに以下を入力：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
5. 「**変更を保存**」ボタンをクリック（ページ下部にある）

---

## ステップ7: 権限を追加

1. 左側のメニューから「**アプリレビュー**」をクリック
2. 「**権限と機能**」をクリック
3. 検索ボックスに「ads_read」と入力
4. 「**ads_read**」を見つけて、「**権限を追加**」ボタンをクリック
5. 同様に「ads_management」を検索して、「**権限を追加**」ボタンをクリック

**注意**: 開発モードでは、アプリの管理者のみがこれらの権限を使用できます。

---

## ステップ8: 環境変数を設定

1. プロジェクトの`backend`フォルダを開く
2. `.env`ファイルを開く（テキストエディタで）
3. ファイルの最後に以下を追加：

```bash
# Meta OAuth設定
META_APP_ID=ここにステップ3でコピーしたApp IDを貼り付け
META_APP_SECRET=ここにステップ4でコピーしたApp Secretを貼り付け
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

**例**:
```bash
# Meta OAuth設定
META_APP_ID=1234567890123456
META_APP_SECRET=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

4. ファイルを保存

---

## ステップ9: バックエンドサーバーを再起動

1. バックエンドサーバーが起動している場合は、停止する（Ctrl+C）
2. ターミナルで以下を実行：

```bash
cd backend
./venv/bin/python3 -m uvicorn app.main:app --host 127.0.0.1 --port 8000 --reload
```

3. サーバーが起動したことを確認（エラーが出ないこと）

---

## ステップ10: 動作確認

1. ブラウザで `http://localhost:3000` を開く
2. ログインする
3. 左側のメニューから「**設定**」をクリック
4. ページを下にスクロールして「**Meta広告アカウント連携**」セクションを見つける
5. 「**Metaでログインして連携**」という青いボタンをクリック
6. Metaのログイン画面が表示されることを確認
7. Metaアカウントでログイン
8. 「**続行**」または「**許可**」ボタンをクリック
9. 設定画面に戻り、「**Meta広告アカウントID**」の欄に`act_`で始まるIDが自動入力されていることを確認

---

## エラーが出た場合

### エラー: "Meta OAuthが設定されていません"

**やること**:
1. `backend/.env`ファイルを開く
2. `META_APP_ID=`の後に数字が入っているか確認
3. 入っていない場合は、ステップ8をやり直す
4. バックエンドサーバーを再起動（ステップ9）

### エラー: "Invalid redirect_uri"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「製品」→「Facebook Login」→「設定」を開く
3. 「有効なOAuthリダイレクトURI」に以下が**完全に一致**しているか確認：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
4. 一致していない場合は、正しく入力して「変更を保存」

### エラー: "Insufficient permissions"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「アプリレビュー」→「権限と機能」を開く
3. `ads_read`と`ads_management`が追加されているか確認
4. 追加されていない場合は、ステップ7をやり直す

### エラー: "広告アカウントが見つかりませんでした"

**やること**:
1. https://business.facebook.com/adsmanager/ にアクセス
2. 広告アカウントが存在するか確認
3. 存在しない場合は、広告アカウントを作成する

---

## 完了

これで設定は完了です。ユーザーは「Metaでログインして連携」ボタンをクリックするだけで、Metaアカウントを連携できるようになります。

## 前提条件
- Meta（Facebook）アカウントを持っていること
- 広告アカウントを持っていること（または作成できること）

---

## ステップ1: Meta for Developersにアクセス

1. ブラウザで以下のURLを開く：
   ```
   https://developers.facebook.com/apps/
   ```

2. Metaアカウントでログインしていない場合は、ログインする

---

## ステップ2: アプリを作成

1. ページ右上の「**アプリを作成**」ボタンをクリック
   - 青いボタンです

2. ポップアップが表示されるので：
   - 「**ビジネス**」を選択
   - 「**次へ**」をクリック

3. アプリ情報を入力：
   - **アプリ名**: 例「MIERU AI」など、任意の名前
   - **アプリの連絡先メール**: あなたのメールアドレス
   - **ビジネスアカウント**: 既存のものを選択、または「新規作成」をクリック

4. 「**アプリを作成**」ボタンをクリック

5. セキュリティチェック（CAPTCHA）が表示されたら、完了する

---

## ステップ3: App IDをコピー

1. アプリダッシュボードが表示される
2. 左側のメニューから「**設定**」をクリック
3. 「**基本設定**」をクリック（設定の下に表示される）
4. ページ上部の「**基本**」セクションに「**アプリID**」が表示される
5. アプリIDの数字をコピー（例: `1234567890123456`）
   - この数字をメモ帳などに保存しておく

---

## ステップ4: App Secretを取得

1. 同じ「基本設定」ページで、下にスクロール
2. 「**アプリシークレット**」というセクションを見つける
3. 「**表示**」ボタンをクリック
4. パスワードを入力して「**送信**」をクリック
5. 表示された文字列をコピー（例: `a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6`）
   - ⚠️ **重要**: この値は一度しか表示されません。必ずメモ帳に保存してください

---

## ステップ5: Facebook Loginを追加

1. 左側のメニューから「**製品**」をクリック
2. 製品一覧の中から「**Facebook Login**」を見つける
3. 「**セットアップ**」ボタンをクリック
4. 設定画面が開く

---

## ステップ6: OAuth Redirect URIを設定

1. Facebook Loginの設定画面で、「**設定**」タブをクリック
2. ページを下にスクロールして「**クライアントOAuth設定**」セクションを見つける
3. 「**有効なOAuthリダイレクトURI**」という項目を見つける
4. テキストボックスに以下を入力：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
5. 「**変更を保存**」ボタンをクリック（ページ下部にある）

---

## ステップ7: 権限を追加

1. 左側のメニューから「**アプリレビュー**」をクリック
2. 「**権限と機能**」をクリック
3. 検索ボックスに「ads_read」と入力
4. 「**ads_read**」を見つけて、「**権限を追加**」ボタンをクリック
5. 同様に「ads_management」を検索して、「**権限を追加**」ボタンをクリック

**注意**: 開発モードでは、アプリの管理者のみがこれらの権限を使用できます。

---

## ステップ8: 環境変数を設定

1. プロジェクトの`backend`フォルダを開く
2. `.env`ファイルを開く（テキストエディタで）
3. ファイルの最後に以下を追加：

```bash
# Meta OAuth設定
META_APP_ID=ここにステップ3でコピーしたApp IDを貼り付け
META_APP_SECRET=ここにステップ4でコピーしたApp Secretを貼り付け
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

**例**:
```bash
# Meta OAuth設定
META_APP_ID=1234567890123456
META_APP_SECRET=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

4. ファイルを保存

---

## ステップ9: バックエンドサーバーを再起動

1. バックエンドサーバーが起動している場合は、停止する（Ctrl+C）
2. ターミナルで以下を実行：

```bash
cd backend
./venv/bin/python3 -m uvicorn app.main:app --host 127.0.0.1 --port 8000 --reload
```

3. サーバーが起動したことを確認（エラーが出ないこと）

---

## ステップ10: 動作確認

1. ブラウザで `http://localhost:3000` を開く
2. ログインする
3. 左側のメニューから「**設定**」をクリック
4. ページを下にスクロールして「**Meta広告アカウント連携**」セクションを見つける
5. 「**Metaでログインして連携**」という青いボタンをクリック
6. Metaのログイン画面が表示されることを確認
7. Metaアカウントでログイン
8. 「**続行**」または「**許可**」ボタンをクリック
9. 設定画面に戻り、「**Meta広告アカウントID**」の欄に`act_`で始まるIDが自動入力されていることを確認

---

## エラーが出た場合

### エラー: "Meta OAuthが設定されていません"

**やること**:
1. `backend/.env`ファイルを開く
2. `META_APP_ID=`の後に数字が入っているか確認
3. 入っていない場合は、ステップ8をやり直す
4. バックエンドサーバーを再起動（ステップ9）

### エラー: "Invalid redirect_uri"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「製品」→「Facebook Login」→「設定」を開く
3. 「有効なOAuthリダイレクトURI」に以下が**完全に一致**しているか確認：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
4. 一致していない場合は、正しく入力して「変更を保存」

### エラー: "Insufficient permissions"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「アプリレビュー」→「権限と機能」を開く
3. `ads_read`と`ads_management`が追加されているか確認
4. 追加されていない場合は、ステップ7をやり直す

### エラー: "広告アカウントが見つかりませんでした"

**やること**:
1. https://business.facebook.com/adsmanager/ にアクセス
2. 広告アカウントが存在するか確認
3. 存在しない場合は、広告アカウントを作成する

---

## 完了

これで設定は完了です。ユーザーは「Metaでログインして連携」ボタンをクリックするだけで、Metaアカウントを連携できるようになります。

## 前提条件
- Meta（Facebook）アカウントを持っていること
- 広告アカウントを持っていること（または作成できること）

---

## ステップ1: Meta for Developersにアクセス

1. ブラウザで以下のURLを開く：
   ```
   https://developers.facebook.com/apps/
   ```

2. Metaアカウントでログインしていない場合は、ログインする

---

## ステップ2: アプリを作成

1. ページ右上の「**アプリを作成**」ボタンをクリック
   - 青いボタンです

2. ポップアップが表示されるので：
   - 「**ビジネス**」を選択
   - 「**次へ**」をクリック

3. アプリ情報を入力：
   - **アプリ名**: 例「MIERU AI」など、任意の名前
   - **アプリの連絡先メール**: あなたのメールアドレス
   - **ビジネスアカウント**: 既存のものを選択、または「新規作成」をクリック

4. 「**アプリを作成**」ボタンをクリック

5. セキュリティチェック（CAPTCHA）が表示されたら、完了する

---

## ステップ3: App IDをコピー

1. アプリダッシュボードが表示される
2. 左側のメニューから「**設定**」をクリック
3. 「**基本設定**」をクリック（設定の下に表示される）
4. ページ上部の「**基本**」セクションに「**アプリID**」が表示される
5. アプリIDの数字をコピー（例: `1234567890123456`）
   - この数字をメモ帳などに保存しておく

---

## ステップ4: App Secretを取得

1. 同じ「基本設定」ページで、下にスクロール
2. 「**アプリシークレット**」というセクションを見つける
3. 「**表示**」ボタンをクリック
4. パスワードを入力して「**送信**」をクリック
5. 表示された文字列をコピー（例: `a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6`）
   - ⚠️ **重要**: この値は一度しか表示されません。必ずメモ帳に保存してください

---

## ステップ5: Facebook Loginを追加

1. 左側のメニューから「**製品**」をクリック
2. 製品一覧の中から「**Facebook Login**」を見つける
3. 「**セットアップ**」ボタンをクリック
4. 設定画面が開く

---

## ステップ6: OAuth Redirect URIを設定

1. Facebook Loginの設定画面で、「**設定**」タブをクリック
2. ページを下にスクロールして「**クライアントOAuth設定**」セクションを見つける
3. 「**有効なOAuthリダイレクトURI**」という項目を見つける
4. テキストボックスに以下を入力：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
5. 「**変更を保存**」ボタンをクリック（ページ下部にある）

---

## ステップ7: 権限を追加

1. 左側のメニューから「**アプリレビュー**」をクリック
2. 「**権限と機能**」をクリック
3. 検索ボックスに「ads_read」と入力
4. 「**ads_read**」を見つけて、「**権限を追加**」ボタンをクリック
5. 同様に「ads_management」を検索して、「**権限を追加**」ボタンをクリック

**注意**: 開発モードでは、アプリの管理者のみがこれらの権限を使用できます。

---

## ステップ8: 環境変数を設定

1. プロジェクトの`backend`フォルダを開く
2. `.env`ファイルを開く（テキストエディタで）
3. ファイルの最後に以下を追加：

```bash
# Meta OAuth設定
META_APP_ID=ここにステップ3でコピーしたApp IDを貼り付け
META_APP_SECRET=ここにステップ4でコピーしたApp Secretを貼り付け
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

**例**:
```bash
# Meta OAuth設定
META_APP_ID=1234567890123456
META_APP_SECRET=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

4. ファイルを保存

---

## ステップ9: バックエンドサーバーを再起動

1. バックエンドサーバーが起動している場合は、停止する（Ctrl+C）
2. ターミナルで以下を実行：

```bash
cd backend
./venv/bin/python3 -m uvicorn app.main:app --host 127.0.0.1 --port 8000 --reload
```

3. サーバーが起動したことを確認（エラーが出ないこと）

---

## ステップ10: 動作確認

1. ブラウザで `http://localhost:3000` を開く
2. ログインする
3. 左側のメニューから「**設定**」をクリック
4. ページを下にスクロールして「**Meta広告アカウント連携**」セクションを見つける
5. 「**Metaでログインして連携**」という青いボタンをクリック
6. Metaのログイン画面が表示されることを確認
7. Metaアカウントでログイン
8. 「**続行**」または「**許可**」ボタンをクリック
9. 設定画面に戻り、「**Meta広告アカウントID**」の欄に`act_`で始まるIDが自動入力されていることを確認

---

## エラーが出た場合

### エラー: "Meta OAuthが設定されていません"

**やること**:
1. `backend/.env`ファイルを開く
2. `META_APP_ID=`の後に数字が入っているか確認
3. 入っていない場合は、ステップ8をやり直す
4. バックエンドサーバーを再起動（ステップ9）

### エラー: "Invalid redirect_uri"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「製品」→「Facebook Login」→「設定」を開く
3. 「有効なOAuthリダイレクトURI」に以下が**完全に一致**しているか確認：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
4. 一致していない場合は、正しく入力して「変更を保存」

### エラー: "Insufficient permissions"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「アプリレビュー」→「権限と機能」を開く
3. `ads_read`と`ads_management`が追加されているか確認
4. 追加されていない場合は、ステップ7をやり直す

### エラー: "広告アカウントが見つかりませんでした"

**やること**:
1. https://business.facebook.com/adsmanager/ にアクセス
2. 広告アカウントが存在するか確認
3. 存在しない場合は、広告アカウントを作成する

---

## 完了

これで設定は完了です。ユーザーは「Metaでログインして連携」ボタンをクリックするだけで、Metaアカウントを連携できるようになります。

## 前提条件
- Meta（Facebook）アカウントを持っていること
- 広告アカウントを持っていること（または作成できること）

---

## ステップ1: Meta for Developersにアクセス

1. ブラウザで以下のURLを開く：
   ```
   https://developers.facebook.com/apps/
   ```

2. Metaアカウントでログインしていない場合は、ログインする

---

## ステップ2: アプリを作成

1. ページ右上の「**アプリを作成**」ボタンをクリック
   - 青いボタンです

2. ポップアップが表示されるので：
   - 「**ビジネス**」を選択
   - 「**次へ**」をクリック

3. アプリ情報を入力：
   - **アプリ名**: 例「MIERU AI」など、任意の名前
   - **アプリの連絡先メール**: あなたのメールアドレス
   - **ビジネスアカウント**: 既存のものを選択、または「新規作成」をクリック

4. 「**アプリを作成**」ボタンをクリック

5. セキュリティチェック（CAPTCHA）が表示されたら、完了する

---

## ステップ3: App IDをコピー

1. アプリダッシュボードが表示される
2. 左側のメニューから「**設定**」をクリック
3. 「**基本設定**」をクリック（設定の下に表示される）
4. ページ上部の「**基本**」セクションに「**アプリID**」が表示される
5. アプリIDの数字をコピー（例: `1234567890123456`）
   - この数字をメモ帳などに保存しておく

---

## ステップ4: App Secretを取得

1. 同じ「基本設定」ページで、下にスクロール
2. 「**アプリシークレット**」というセクションを見つける
3. 「**表示**」ボタンをクリック
4. パスワードを入力して「**送信**」をクリック
5. 表示された文字列をコピー（例: `a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6`）
   - ⚠️ **重要**: この値は一度しか表示されません。必ずメモ帳に保存してください

---

## ステップ5: Facebook Loginを追加

1. 左側のメニューから「**製品**」をクリック
2. 製品一覧の中から「**Facebook Login**」を見つける
3. 「**セットアップ**」ボタンをクリック
4. 設定画面が開く

---

## ステップ6: OAuth Redirect URIを設定

1. Facebook Loginの設定画面で、「**設定**」タブをクリック
2. ページを下にスクロールして「**クライアントOAuth設定**」セクションを見つける
3. 「**有効なOAuthリダイレクトURI**」という項目を見つける
4. テキストボックスに以下を入力：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
5. 「**変更を保存**」ボタンをクリック（ページ下部にある）

---

## ステップ7: 権限を追加

1. 左側のメニューから「**アプリレビュー**」をクリック
2. 「**権限と機能**」をクリック
3. 検索ボックスに「ads_read」と入力
4. 「**ads_read**」を見つけて、「**権限を追加**」ボタンをクリック
5. 同様に「ads_management」を検索して、「**権限を追加**」ボタンをクリック

**注意**: 開発モードでは、アプリの管理者のみがこれらの権限を使用できます。

---

## ステップ8: 環境変数を設定

1. プロジェクトの`backend`フォルダを開く
2. `.env`ファイルを開く（テキストエディタで）
3. ファイルの最後に以下を追加：

```bash
# Meta OAuth設定
META_APP_ID=ここにステップ3でコピーしたApp IDを貼り付け
META_APP_SECRET=ここにステップ4でコピーしたApp Secretを貼り付け
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

**例**:
```bash
# Meta OAuth設定
META_APP_ID=1234567890123456
META_APP_SECRET=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

4. ファイルを保存

---

## ステップ9: バックエンドサーバーを再起動

1. バックエンドサーバーが起動している場合は、停止する（Ctrl+C）
2. ターミナルで以下を実行：

```bash
cd backend
./venv/bin/python3 -m uvicorn app.main:app --host 127.0.0.1 --port 8000 --reload
```

3. サーバーが起動したことを確認（エラーが出ないこと）

---

## ステップ10: 動作確認

1. ブラウザで `http://localhost:3000` を開く
2. ログインする
3. 左側のメニューから「**設定**」をクリック
4. ページを下にスクロールして「**Meta広告アカウント連携**」セクションを見つける
5. 「**Metaでログインして連携**」という青いボタンをクリック
6. Metaのログイン画面が表示されることを確認
7. Metaアカウントでログイン
8. 「**続行**」または「**許可**」ボタンをクリック
9. 設定画面に戻り、「**Meta広告アカウントID**」の欄に`act_`で始まるIDが自動入力されていることを確認

---

## エラーが出た場合

### エラー: "Meta OAuthが設定されていません"

**やること**:
1. `backend/.env`ファイルを開く
2. `META_APP_ID=`の後に数字が入っているか確認
3. 入っていない場合は、ステップ8をやり直す
4. バックエンドサーバーを再起動（ステップ9）

### エラー: "Invalid redirect_uri"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「製品」→「Facebook Login」→「設定」を開く
3. 「有効なOAuthリダイレクトURI」に以下が**完全に一致**しているか確認：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
4. 一致していない場合は、正しく入力して「変更を保存」

### エラー: "Insufficient permissions"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「アプリレビュー」→「権限と機能」を開く
3. `ads_read`と`ads_management`が追加されているか確認
4. 追加されていない場合は、ステップ7をやり直す

### エラー: "広告アカウントが見つかりませんでした"

**やること**:
1. https://business.facebook.com/adsmanager/ にアクセス
2. 広告アカウントが存在するか確認
3. 存在しない場合は、広告アカウントを作成する

---

## 完了

これで設定は完了です。ユーザーは「Metaでログインして連携」ボタンをクリックするだけで、Metaアカウントを連携できるようになります。

## 前提条件
- Meta（Facebook）アカウントを持っていること
- 広告アカウントを持っていること（または作成できること）

---

## ステップ1: Meta for Developersにアクセス

1. ブラウザで以下のURLを開く：
   ```
   https://developers.facebook.com/apps/
   ```

2. Metaアカウントでログインしていない場合は、ログインする

---

## ステップ2: アプリを作成

1. ページ右上の「**アプリを作成**」ボタンをクリック
   - 青いボタンです

2. ポップアップが表示されるので：
   - 「**ビジネス**」を選択
   - 「**次へ**」をクリック

3. アプリ情報を入力：
   - **アプリ名**: 例「MIERU AI」など、任意の名前
   - **アプリの連絡先メール**: あなたのメールアドレス
   - **ビジネスアカウント**: 既存のものを選択、または「新規作成」をクリック

4. 「**アプリを作成**」ボタンをクリック

5. セキュリティチェック（CAPTCHA）が表示されたら、完了する

---

## ステップ3: App IDをコピー

1. アプリダッシュボードが表示される
2. 左側のメニューから「**設定**」をクリック
3. 「**基本設定**」をクリック（設定の下に表示される）
4. ページ上部の「**基本**」セクションに「**アプリID**」が表示される
5. アプリIDの数字をコピー（例: `1234567890123456`）
   - この数字をメモ帳などに保存しておく

---

## ステップ4: App Secretを取得

1. 同じ「基本設定」ページで、下にスクロール
2. 「**アプリシークレット**」というセクションを見つける
3. 「**表示**」ボタンをクリック
4. パスワードを入力して「**送信**」をクリック
5. 表示された文字列をコピー（例: `a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6`）
   - ⚠️ **重要**: この値は一度しか表示されません。必ずメモ帳に保存してください

---

## ステップ5: Facebook Loginを追加

1. 左側のメニューから「**製品**」をクリック
2. 製品一覧の中から「**Facebook Login**」を見つける
3. 「**セットアップ**」ボタンをクリック
4. 設定画面が開く

---

## ステップ6: OAuth Redirect URIを設定

1. Facebook Loginの設定画面で、「**設定**」タブをクリック
2. ページを下にスクロールして「**クライアントOAuth設定**」セクションを見つける
3. 「**有効なOAuthリダイレクトURI**」という項目を見つける
4. テキストボックスに以下を入力：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
5. 「**変更を保存**」ボタンをクリック（ページ下部にある）

---

## ステップ7: 権限を追加

1. 左側のメニューから「**アプリレビュー**」をクリック
2. 「**権限と機能**」をクリック
3. 検索ボックスに「ads_read」と入力
4. 「**ads_read**」を見つけて、「**権限を追加**」ボタンをクリック
5. 同様に「ads_management」を検索して、「**権限を追加**」ボタンをクリック

**注意**: 開発モードでは、アプリの管理者のみがこれらの権限を使用できます。

---

## ステップ8: 環境変数を設定

1. プロジェクトの`backend`フォルダを開く
2. `.env`ファイルを開く（テキストエディタで）
3. ファイルの最後に以下を追加：

```bash
# Meta OAuth設定
META_APP_ID=ここにステップ3でコピーしたApp IDを貼り付け
META_APP_SECRET=ここにステップ4でコピーしたApp Secretを貼り付け
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

**例**:
```bash
# Meta OAuth設定
META_APP_ID=1234567890123456
META_APP_SECRET=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

4. ファイルを保存

---

## ステップ9: バックエンドサーバーを再起動

1. バックエンドサーバーが起動している場合は、停止する（Ctrl+C）
2. ターミナルで以下を実行：

```bash
cd backend
./venv/bin/python3 -m uvicorn app.main:app --host 127.0.0.1 --port 8000 --reload
```

3. サーバーが起動したことを確認（エラーが出ないこと）

---

## ステップ10: 動作確認

1. ブラウザで `http://localhost:3000` を開く
2. ログインする
3. 左側のメニューから「**設定**」をクリック
4. ページを下にスクロールして「**Meta広告アカウント連携**」セクションを見つける
5. 「**Metaでログインして連携**」という青いボタンをクリック
6. Metaのログイン画面が表示されることを確認
7. Metaアカウントでログイン
8. 「**続行**」または「**許可**」ボタンをクリック
9. 設定画面に戻り、「**Meta広告アカウントID**」の欄に`act_`で始まるIDが自動入力されていることを確認

---

## エラーが出た場合

### エラー: "Meta OAuthが設定されていません"

**やること**:
1. `backend/.env`ファイルを開く
2. `META_APP_ID=`の後に数字が入っているか確認
3. 入っていない場合は、ステップ8をやり直す
4. バックエンドサーバーを再起動（ステップ9）

### エラー: "Invalid redirect_uri"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「製品」→「Facebook Login」→「設定」を開く
3. 「有効なOAuthリダイレクトURI」に以下が**完全に一致**しているか確認：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
4. 一致していない場合は、正しく入力して「変更を保存」

### エラー: "Insufficient permissions"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「アプリレビュー」→「権限と機能」を開く
3. `ads_read`と`ads_management`が追加されているか確認
4. 追加されていない場合は、ステップ7をやり直す

### エラー: "広告アカウントが見つかりませんでした"

**やること**:
1. https://business.facebook.com/adsmanager/ にアクセス
2. 広告アカウントが存在するか確認
3. 存在しない場合は、広告アカウントを作成する

---

## 完了

これで設定は完了です。ユーザーは「Metaでログインして連携」ボタンをクリックするだけで、Metaアカウントを連携できるようになります。

## 前提条件
- Meta（Facebook）アカウントを持っていること
- 広告アカウントを持っていること（または作成できること）

---

## ステップ1: Meta for Developersにアクセス

1. ブラウザで以下のURLを開く：
   ```
   https://developers.facebook.com/apps/
   ```

2. Metaアカウントでログインしていない場合は、ログインする

---

## ステップ2: アプリを作成

1. ページ右上の「**アプリを作成**」ボタンをクリック
   - 青いボタンです

2. ポップアップが表示されるので：
   - 「**ビジネス**」を選択
   - 「**次へ**」をクリック

3. アプリ情報を入力：
   - **アプリ名**: 例「MIERU AI」など、任意の名前
   - **アプリの連絡先メール**: あなたのメールアドレス
   - **ビジネスアカウント**: 既存のものを選択、または「新規作成」をクリック

4. 「**アプリを作成**」ボタンをクリック

5. セキュリティチェック（CAPTCHA）が表示されたら、完了する

---

## ステップ3: App IDをコピー

1. アプリダッシュボードが表示される
2. 左側のメニューから「**設定**」をクリック
3. 「**基本設定**」をクリック（設定の下に表示される）
4. ページ上部の「**基本**」セクションに「**アプリID**」が表示される
5. アプリIDの数字をコピー（例: `1234567890123456`）
   - この数字をメモ帳などに保存しておく

---

## ステップ4: App Secretを取得

1. 同じ「基本設定」ページで、下にスクロール
2. 「**アプリシークレット**」というセクションを見つける
3. 「**表示**」ボタンをクリック
4. パスワードを入力して「**送信**」をクリック
5. 表示された文字列をコピー（例: `a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6`）
   - ⚠️ **重要**: この値は一度しか表示されません。必ずメモ帳に保存してください

---

## ステップ5: Facebook Loginを追加

1. 左側のメニューから「**製品**」をクリック
2. 製品一覧の中から「**Facebook Login**」を見つける
3. 「**セットアップ**」ボタンをクリック
4. 設定画面が開く

---

## ステップ6: OAuth Redirect URIを設定

1. Facebook Loginの設定画面で、「**設定**」タブをクリック
2. ページを下にスクロールして「**クライアントOAuth設定**」セクションを見つける
3. 「**有効なOAuthリダイレクトURI**」という項目を見つける
4. テキストボックスに以下を入力：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
5. 「**変更を保存**」ボタンをクリック（ページ下部にある）

---

## ステップ7: 権限を追加

1. 左側のメニューから「**アプリレビュー**」をクリック
2. 「**権限と機能**」をクリック
3. 検索ボックスに「ads_read」と入力
4. 「**ads_read**」を見つけて、「**権限を追加**」ボタンをクリック
5. 同様に「ads_management」を検索して、「**権限を追加**」ボタンをクリック

**注意**: 開発モードでは、アプリの管理者のみがこれらの権限を使用できます。

---

## ステップ8: 環境変数を設定

1. プロジェクトの`backend`フォルダを開く
2. `.env`ファイルを開く（テキストエディタで）
3. ファイルの最後に以下を追加：

```bash
# Meta OAuth設定
META_APP_ID=ここにステップ3でコピーしたApp IDを貼り付け
META_APP_SECRET=ここにステップ4でコピーしたApp Secretを貼り付け
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

**例**:
```bash
# Meta OAuth設定
META_APP_ID=1234567890123456
META_APP_SECRET=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

4. ファイルを保存

---

## ステップ9: バックエンドサーバーを再起動

1. バックエンドサーバーが起動している場合は、停止する（Ctrl+C）
2. ターミナルで以下を実行：

```bash
cd backend
./venv/bin/python3 -m uvicorn app.main:app --host 127.0.0.1 --port 8000 --reload
```

3. サーバーが起動したことを確認（エラーが出ないこと）

---

## ステップ10: 動作確認

1. ブラウザで `http://localhost:3000` を開く
2. ログインする
3. 左側のメニューから「**設定**」をクリック
4. ページを下にスクロールして「**Meta広告アカウント連携**」セクションを見つける
5. 「**Metaでログインして連携**」という青いボタンをクリック
6. Metaのログイン画面が表示されることを確認
7. Metaアカウントでログイン
8. 「**続行**」または「**許可**」ボタンをクリック
9. 設定画面に戻り、「**Meta広告アカウントID**」の欄に`act_`で始まるIDが自動入力されていることを確認

---

## エラーが出た場合

### エラー: "Meta OAuthが設定されていません"

**やること**:
1. `backend/.env`ファイルを開く
2. `META_APP_ID=`の後に数字が入っているか確認
3. 入っていない場合は、ステップ8をやり直す
4. バックエンドサーバーを再起動（ステップ9）

### エラー: "Invalid redirect_uri"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「製品」→「Facebook Login」→「設定」を開く
3. 「有効なOAuthリダイレクトURI」に以下が**完全に一致**しているか確認：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
4. 一致していない場合は、正しく入力して「変更を保存」

### エラー: "Insufficient permissions"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「アプリレビュー」→「権限と機能」を開く
3. `ads_read`と`ads_management`が追加されているか確認
4. 追加されていない場合は、ステップ7をやり直す

### エラー: "広告アカウントが見つかりませんでした"

**やること**:
1. https://business.facebook.com/adsmanager/ にアクセス
2. 広告アカウントが存在するか確認
3. 存在しない場合は、広告アカウントを作成する

---

## 完了

これで設定は完了です。ユーザーは「Metaでログインして連携」ボタンをクリックするだけで、Metaアカウントを連携できるようになります。

## 前提条件
- Meta（Facebook）アカウントを持っていること
- 広告アカウントを持っていること（または作成できること）

---

## ステップ1: Meta for Developersにアクセス

1. ブラウザで以下のURLを開く：
   ```
   https://developers.facebook.com/apps/
   ```

2. Metaアカウントでログインしていない場合は、ログインする

---

## ステップ2: アプリを作成

1. ページ右上の「**アプリを作成**」ボタンをクリック
   - 青いボタンです

2. ポップアップが表示されるので：
   - 「**ビジネス**」を選択
   - 「**次へ**」をクリック

3. アプリ情報を入力：
   - **アプリ名**: 例「MIERU AI」など、任意の名前
   - **アプリの連絡先メール**: あなたのメールアドレス
   - **ビジネスアカウント**: 既存のものを選択、または「新規作成」をクリック

4. 「**アプリを作成**」ボタンをクリック

5. セキュリティチェック（CAPTCHA）が表示されたら、完了する

---

## ステップ3: App IDをコピー

1. アプリダッシュボードが表示される
2. 左側のメニューから「**設定**」をクリック
3. 「**基本設定**」をクリック（設定の下に表示される）
4. ページ上部の「**基本**」セクションに「**アプリID**」が表示される
5. アプリIDの数字をコピー（例: `1234567890123456`）
   - この数字をメモ帳などに保存しておく

---

## ステップ4: App Secretを取得

1. 同じ「基本設定」ページで、下にスクロール
2. 「**アプリシークレット**」というセクションを見つける
3. 「**表示**」ボタンをクリック
4. パスワードを入力して「**送信**」をクリック
5. 表示された文字列をコピー（例: `a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6`）
   - ⚠️ **重要**: この値は一度しか表示されません。必ずメモ帳に保存してください

---

## ステップ5: Facebook Loginを追加

1. 左側のメニューから「**製品**」をクリック
2. 製品一覧の中から「**Facebook Login**」を見つける
3. 「**セットアップ**」ボタンをクリック
4. 設定画面が開く

---

## ステップ6: OAuth Redirect URIを設定

1. Facebook Loginの設定画面で、「**設定**」タブをクリック
2. ページを下にスクロールして「**クライアントOAuth設定**」セクションを見つける
3. 「**有効なOAuthリダイレクトURI**」という項目を見つける
4. テキストボックスに以下を入力：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
5. 「**変更を保存**」ボタンをクリック（ページ下部にある）

---

## ステップ7: 権限を追加

1. 左側のメニューから「**アプリレビュー**」をクリック
2. 「**権限と機能**」をクリック
3. 検索ボックスに「ads_read」と入力
4. 「**ads_read**」を見つけて、「**権限を追加**」ボタンをクリック
5. 同様に「ads_management」を検索して、「**権限を追加**」ボタンをクリック

**注意**: 開発モードでは、アプリの管理者のみがこれらの権限を使用できます。

---

## ステップ8: 環境変数を設定

1. プロジェクトの`backend`フォルダを開く
2. `.env`ファイルを開く（テキストエディタで）
3. ファイルの最後に以下を追加：

```bash
# Meta OAuth設定
META_APP_ID=ここにステップ3でコピーしたApp IDを貼り付け
META_APP_SECRET=ここにステップ4でコピーしたApp Secretを貼り付け
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

**例**:
```bash
# Meta OAuth設定
META_APP_ID=1234567890123456
META_APP_SECRET=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

4. ファイルを保存

---

## ステップ9: バックエンドサーバーを再起動

1. バックエンドサーバーが起動している場合は、停止する（Ctrl+C）
2. ターミナルで以下を実行：

```bash
cd backend
./venv/bin/python3 -m uvicorn app.main:app --host 127.0.0.1 --port 8000 --reload
```

3. サーバーが起動したことを確認（エラーが出ないこと）

---

## ステップ10: 動作確認

1. ブラウザで `http://localhost:3000` を開く
2. ログインする
3. 左側のメニューから「**設定**」をクリック
4. ページを下にスクロールして「**Meta広告アカウント連携**」セクションを見つける
5. 「**Metaでログインして連携**」という青いボタンをクリック
6. Metaのログイン画面が表示されることを確認
7. Metaアカウントでログイン
8. 「**続行**」または「**許可**」ボタンをクリック
9. 設定画面に戻り、「**Meta広告アカウントID**」の欄に`act_`で始まるIDが自動入力されていることを確認

---

## エラーが出た場合

### エラー: "Meta OAuthが設定されていません"

**やること**:
1. `backend/.env`ファイルを開く
2. `META_APP_ID=`の後に数字が入っているか確認
3. 入っていない場合は、ステップ8をやり直す
4. バックエンドサーバーを再起動（ステップ9）

### エラー: "Invalid redirect_uri"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「製品」→「Facebook Login」→「設定」を開く
3. 「有効なOAuthリダイレクトURI」に以下が**完全に一致**しているか確認：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
4. 一致していない場合は、正しく入力して「変更を保存」

### エラー: "Insufficient permissions"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「アプリレビュー」→「権限と機能」を開く
3. `ads_read`と`ads_management`が追加されているか確認
4. 追加されていない場合は、ステップ7をやり直す

### エラー: "広告アカウントが見つかりませんでした"

**やること**:
1. https://business.facebook.com/adsmanager/ にアクセス
2. 広告アカウントが存在するか確認
3. 存在しない場合は、広告アカウントを作成する

---

## 完了

これで設定は完了です。ユーザーは「Metaでログインして連携」ボタンをクリックするだけで、Metaアカウントを連携できるようになります。

## 前提条件
- Meta（Facebook）アカウントを持っていること
- 広告アカウントを持っていること（または作成できること）

---

## ステップ1: Meta for Developersにアクセス

1. ブラウザで以下のURLを開く：
   ```
   https://developers.facebook.com/apps/
   ```

2. Metaアカウントでログインしていない場合は、ログインする

---

## ステップ2: アプリを作成

1. ページ右上の「**アプリを作成**」ボタンをクリック
   - 青いボタンです

2. ポップアップが表示されるので：
   - 「**ビジネス**」を選択
   - 「**次へ**」をクリック

3. アプリ情報を入力：
   - **アプリ名**: 例「MIERU AI」など、任意の名前
   - **アプリの連絡先メール**: あなたのメールアドレス
   - **ビジネスアカウント**: 既存のものを選択、または「新規作成」をクリック

4. 「**アプリを作成**」ボタンをクリック

5. セキュリティチェック（CAPTCHA）が表示されたら、完了する

---

## ステップ3: App IDをコピー

1. アプリダッシュボードが表示される
2. 左側のメニューから「**設定**」をクリック
3. 「**基本設定**」をクリック（設定の下に表示される）
4. ページ上部の「**基本**」セクションに「**アプリID**」が表示される
5. アプリIDの数字をコピー（例: `1234567890123456`）
   - この数字をメモ帳などに保存しておく

---

## ステップ4: App Secretを取得

1. 同じ「基本設定」ページで、下にスクロール
2. 「**アプリシークレット**」というセクションを見つける
3. 「**表示**」ボタンをクリック
4. パスワードを入力して「**送信**」をクリック
5. 表示された文字列をコピー（例: `a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6`）
   - ⚠️ **重要**: この値は一度しか表示されません。必ずメモ帳に保存してください

---

## ステップ5: Facebook Loginを追加

1. 左側のメニューから「**製品**」をクリック
2. 製品一覧の中から「**Facebook Login**」を見つける
3. 「**セットアップ**」ボタンをクリック
4. 設定画面が開く

---

## ステップ6: OAuth Redirect URIを設定

1. Facebook Loginの設定画面で、「**設定**」タブをクリック
2. ページを下にスクロールして「**クライアントOAuth設定**」セクションを見つける
3. 「**有効なOAuthリダイレクトURI**」という項目を見つける
4. テキストボックスに以下を入力：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
5. 「**変更を保存**」ボタンをクリック（ページ下部にある）

---

## ステップ7: 権限を追加

1. 左側のメニューから「**アプリレビュー**」をクリック
2. 「**権限と機能**」をクリック
3. 検索ボックスに「ads_read」と入力
4. 「**ads_read**」を見つけて、「**権限を追加**」ボタンをクリック
5. 同様に「ads_management」を検索して、「**権限を追加**」ボタンをクリック

**注意**: 開発モードでは、アプリの管理者のみがこれらの権限を使用できます。

---

## ステップ8: 環境変数を設定

1. プロジェクトの`backend`フォルダを開く
2. `.env`ファイルを開く（テキストエディタで）
3. ファイルの最後に以下を追加：

```bash
# Meta OAuth設定
META_APP_ID=ここにステップ3でコピーしたApp IDを貼り付け
META_APP_SECRET=ここにステップ4でコピーしたApp Secretを貼り付け
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

**例**:
```bash
# Meta OAuth設定
META_APP_ID=1234567890123456
META_APP_SECRET=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

4. ファイルを保存

---

## ステップ9: バックエンドサーバーを再起動

1. バックエンドサーバーが起動している場合は、停止する（Ctrl+C）
2. ターミナルで以下を実行：

```bash
cd backend
./venv/bin/python3 -m uvicorn app.main:app --host 127.0.0.1 --port 8000 --reload
```

3. サーバーが起動したことを確認（エラーが出ないこと）

---

## ステップ10: 動作確認

1. ブラウザで `http://localhost:3000` を開く
2. ログインする
3. 左側のメニューから「**設定**」をクリック
4. ページを下にスクロールして「**Meta広告アカウント連携**」セクションを見つける
5. 「**Metaでログインして連携**」という青いボタンをクリック
6. Metaのログイン画面が表示されることを確認
7. Metaアカウントでログイン
8. 「**続行**」または「**許可**」ボタンをクリック
9. 設定画面に戻り、「**Meta広告アカウントID**」の欄に`act_`で始まるIDが自動入力されていることを確認

---

## エラーが出た場合

### エラー: "Meta OAuthが設定されていません"

**やること**:
1. `backend/.env`ファイルを開く
2. `META_APP_ID=`の後に数字が入っているか確認
3. 入っていない場合は、ステップ8をやり直す
4. バックエンドサーバーを再起動（ステップ9）

### エラー: "Invalid redirect_uri"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「製品」→「Facebook Login」→「設定」を開く
3. 「有効なOAuthリダイレクトURI」に以下が**完全に一致**しているか確認：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
4. 一致していない場合は、正しく入力して「変更を保存」

### エラー: "Insufficient permissions"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「アプリレビュー」→「権限と機能」を開く
3. `ads_read`と`ads_management`が追加されているか確認
4. 追加されていない場合は、ステップ7をやり直す

### エラー: "広告アカウントが見つかりませんでした"

**やること**:
1. https://business.facebook.com/adsmanager/ にアクセス
2. 広告アカウントが存在するか確認
3. 存在しない場合は、広告アカウントを作成する

---

## 完了

これで設定は完了です。ユーザーは「Metaでログインして連携」ボタンをクリックするだけで、Metaアカウントを連携できるようになります。

## 前提条件
- Meta（Facebook）アカウントを持っていること
- 広告アカウントを持っていること（または作成できること）

---

## ステップ1: Meta for Developersにアクセス

1. ブラウザで以下のURLを開く：
   ```
   https://developers.facebook.com/apps/
   ```

2. Metaアカウントでログインしていない場合は、ログインする

---

## ステップ2: アプリを作成

1. ページ右上の「**アプリを作成**」ボタンをクリック
   - 青いボタンです

2. ポップアップが表示されるので：
   - 「**ビジネス**」を選択
   - 「**次へ**」をクリック

3. アプリ情報を入力：
   - **アプリ名**: 例「MIERU AI」など、任意の名前
   - **アプリの連絡先メール**: あなたのメールアドレス
   - **ビジネスアカウント**: 既存のものを選択、または「新規作成」をクリック

4. 「**アプリを作成**」ボタンをクリック

5. セキュリティチェック（CAPTCHA）が表示されたら、完了する

---

## ステップ3: App IDをコピー

1. アプリダッシュボードが表示される
2. 左側のメニューから「**設定**」をクリック
3. 「**基本設定**」をクリック（設定の下に表示される）
4. ページ上部の「**基本**」セクションに「**アプリID**」が表示される
5. アプリIDの数字をコピー（例: `1234567890123456`）
   - この数字をメモ帳などに保存しておく

---

## ステップ4: App Secretを取得

1. 同じ「基本設定」ページで、下にスクロール
2. 「**アプリシークレット**」というセクションを見つける
3. 「**表示**」ボタンをクリック
4. パスワードを入力して「**送信**」をクリック
5. 表示された文字列をコピー（例: `a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6`）
   - ⚠️ **重要**: この値は一度しか表示されません。必ずメモ帳に保存してください

---

## ステップ5: Facebook Loginを追加

1. 左側のメニューから「**製品**」をクリック
2. 製品一覧の中から「**Facebook Login**」を見つける
3. 「**セットアップ**」ボタンをクリック
4. 設定画面が開く

---

## ステップ6: OAuth Redirect URIを設定

1. Facebook Loginの設定画面で、「**設定**」タブをクリック
2. ページを下にスクロールして「**クライアントOAuth設定**」セクションを見つける
3. 「**有効なOAuthリダイレクトURI**」という項目を見つける
4. テキストボックスに以下を入力：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
5. 「**変更を保存**」ボタンをクリック（ページ下部にある）

---

## ステップ7: 権限を追加

1. 左側のメニューから「**アプリレビュー**」をクリック
2. 「**権限と機能**」をクリック
3. 検索ボックスに「ads_read」と入力
4. 「**ads_read**」を見つけて、「**権限を追加**」ボタンをクリック
5. 同様に「ads_management」を検索して、「**権限を追加**」ボタンをクリック

**注意**: 開発モードでは、アプリの管理者のみがこれらの権限を使用できます。

---

## ステップ8: 環境変数を設定

1. プロジェクトの`backend`フォルダを開く
2. `.env`ファイルを開く（テキストエディタで）
3. ファイルの最後に以下を追加：

```bash
# Meta OAuth設定
META_APP_ID=ここにステップ3でコピーしたApp IDを貼り付け
META_APP_SECRET=ここにステップ4でコピーしたApp Secretを貼り付け
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

**例**:
```bash
# Meta OAuth設定
META_APP_ID=1234567890123456
META_APP_SECRET=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

4. ファイルを保存

---

## ステップ9: バックエンドサーバーを再起動

1. バックエンドサーバーが起動している場合は、停止する（Ctrl+C）
2. ターミナルで以下を実行：

```bash
cd backend
./venv/bin/python3 -m uvicorn app.main:app --host 127.0.0.1 --port 8000 --reload
```

3. サーバーが起動したことを確認（エラーが出ないこと）

---

## ステップ10: 動作確認

1. ブラウザで `http://localhost:3000` を開く
2. ログインする
3. 左側のメニューから「**設定**」をクリック
4. ページを下にスクロールして「**Meta広告アカウント連携**」セクションを見つける
5. 「**Metaでログインして連携**」という青いボタンをクリック
6. Metaのログイン画面が表示されることを確認
7. Metaアカウントでログイン
8. 「**続行**」または「**許可**」ボタンをクリック
9. 設定画面に戻り、「**Meta広告アカウントID**」の欄に`act_`で始まるIDが自動入力されていることを確認

---

## エラーが出た場合

### エラー: "Meta OAuthが設定されていません"

**やること**:
1. `backend/.env`ファイルを開く
2. `META_APP_ID=`の後に数字が入っているか確認
3. 入っていない場合は、ステップ8をやり直す
4. バックエンドサーバーを再起動（ステップ9）

### エラー: "Invalid redirect_uri"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「製品」→「Facebook Login」→「設定」を開く
3. 「有効なOAuthリダイレクトURI」に以下が**完全に一致**しているか確認：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
4. 一致していない場合は、正しく入力して「変更を保存」

### エラー: "Insufficient permissions"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「アプリレビュー」→「権限と機能」を開く
3. `ads_read`と`ads_management`が追加されているか確認
4. 追加されていない場合は、ステップ7をやり直す

### エラー: "広告アカウントが見つかりませんでした"

**やること**:
1. https://business.facebook.com/adsmanager/ にアクセス
2. 広告アカウントが存在するか確認
3. 存在しない場合は、広告アカウントを作成する

---

## 完了

これで設定は完了です。ユーザーは「Metaでログインして連携」ボタンをクリックするだけで、Metaアカウントを連携できるようになります。

## 前提条件
- Meta（Facebook）アカウントを持っていること
- 広告アカウントを持っていること（または作成できること）

---

## ステップ1: Meta for Developersにアクセス

1. ブラウザで以下のURLを開く：
   ```
   https://developers.facebook.com/apps/
   ```

2. Metaアカウントでログインしていない場合は、ログインする

---

## ステップ2: アプリを作成

1. ページ右上の「**アプリを作成**」ボタンをクリック
   - 青いボタンです

2. ポップアップが表示されるので：
   - 「**ビジネス**」を選択
   - 「**次へ**」をクリック

3. アプリ情報を入力：
   - **アプリ名**: 例「MIERU AI」など、任意の名前
   - **アプリの連絡先メール**: あなたのメールアドレス
   - **ビジネスアカウント**: 既存のものを選択、または「新規作成」をクリック

4. 「**アプリを作成**」ボタンをクリック

5. セキュリティチェック（CAPTCHA）が表示されたら、完了する

---

## ステップ3: App IDをコピー

1. アプリダッシュボードが表示される
2. 左側のメニューから「**設定**」をクリック
3. 「**基本設定**」をクリック（設定の下に表示される）
4. ページ上部の「**基本**」セクションに「**アプリID**」が表示される
5. アプリIDの数字をコピー（例: `1234567890123456`）
   - この数字をメモ帳などに保存しておく

---

## ステップ4: App Secretを取得

1. 同じ「基本設定」ページで、下にスクロール
2. 「**アプリシークレット**」というセクションを見つける
3. 「**表示**」ボタンをクリック
4. パスワードを入力して「**送信**」をクリック
5. 表示された文字列をコピー（例: `a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6`）
   - ⚠️ **重要**: この値は一度しか表示されません。必ずメモ帳に保存してください

---

## ステップ5: Facebook Loginを追加

1. 左側のメニューから「**製品**」をクリック
2. 製品一覧の中から「**Facebook Login**」を見つける
3. 「**セットアップ**」ボタンをクリック
4. 設定画面が開く

---

## ステップ6: OAuth Redirect URIを設定

1. Facebook Loginの設定画面で、「**設定**」タブをクリック
2. ページを下にスクロールして「**クライアントOAuth設定**」セクションを見つける
3. 「**有効なOAuthリダイレクトURI**」という項目を見つける
4. テキストボックスに以下を入力：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
5. 「**変更を保存**」ボタンをクリック（ページ下部にある）

---

## ステップ7: 権限を追加

1. 左側のメニューから「**アプリレビュー**」をクリック
2. 「**権限と機能**」をクリック
3. 検索ボックスに「ads_read」と入力
4. 「**ads_read**」を見つけて、「**権限を追加**」ボタンをクリック
5. 同様に「ads_management」を検索して、「**権限を追加**」ボタンをクリック

**注意**: 開発モードでは、アプリの管理者のみがこれらの権限を使用できます。

---

## ステップ8: 環境変数を設定

1. プロジェクトの`backend`フォルダを開く
2. `.env`ファイルを開く（テキストエディタで）
3. ファイルの最後に以下を追加：

```bash
# Meta OAuth設定
META_APP_ID=ここにステップ3でコピーしたApp IDを貼り付け
META_APP_SECRET=ここにステップ4でコピーしたApp Secretを貼り付け
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

**例**:
```bash
# Meta OAuth設定
META_APP_ID=1234567890123456
META_APP_SECRET=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

4. ファイルを保存

---

## ステップ9: バックエンドサーバーを再起動

1. バックエンドサーバーが起動している場合は、停止する（Ctrl+C）
2. ターミナルで以下を実行：

```bash
cd backend
./venv/bin/python3 -m uvicorn app.main:app --host 127.0.0.1 --port 8000 --reload
```

3. サーバーが起動したことを確認（エラーが出ないこと）

---

## ステップ10: 動作確認

1. ブラウザで `http://localhost:3000` を開く
2. ログインする
3. 左側のメニューから「**設定**」をクリック
4. ページを下にスクロールして「**Meta広告アカウント連携**」セクションを見つける
5. 「**Metaでログインして連携**」という青いボタンをクリック
6. Metaのログイン画面が表示されることを確認
7. Metaアカウントでログイン
8. 「**続行**」または「**許可**」ボタンをクリック
9. 設定画面に戻り、「**Meta広告アカウントID**」の欄に`act_`で始まるIDが自動入力されていることを確認

---

## エラーが出た場合

### エラー: "Meta OAuthが設定されていません"

**やること**:
1. `backend/.env`ファイルを開く
2. `META_APP_ID=`の後に数字が入っているか確認
3. 入っていない場合は、ステップ8をやり直す
4. バックエンドサーバーを再起動（ステップ9）

### エラー: "Invalid redirect_uri"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「製品」→「Facebook Login」→「設定」を開く
3. 「有効なOAuthリダイレクトURI」に以下が**完全に一致**しているか確認：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
4. 一致していない場合は、正しく入力して「変更を保存」

### エラー: "Insufficient permissions"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「アプリレビュー」→「権限と機能」を開く
3. `ads_read`と`ads_management`が追加されているか確認
4. 追加されていない場合は、ステップ7をやり直す

### エラー: "広告アカウントが見つかりませんでした"

**やること**:
1. https://business.facebook.com/adsmanager/ にアクセス
2. 広告アカウントが存在するか確認
3. 存在しない場合は、広告アカウントを作成する

---

## 完了

これで設定は完了です。ユーザーは「Metaでログインして連携」ボタンをクリックするだけで、Metaアカウントを連携できるようになります。

## 前提条件
- Meta（Facebook）アカウントを持っていること
- 広告アカウントを持っていること（または作成できること）

---

## ステップ1: Meta for Developersにアクセス

1. ブラウザで以下のURLを開く：
   ```
   https://developers.facebook.com/apps/
   ```

2. Metaアカウントでログインしていない場合は、ログインする

---

## ステップ2: アプリを作成

1. ページ右上の「**アプリを作成**」ボタンをクリック
   - 青いボタンです

2. ポップアップが表示されるので：
   - 「**ビジネス**」を選択
   - 「**次へ**」をクリック

3. アプリ情報を入力：
   - **アプリ名**: 例「MIERU AI」など、任意の名前
   - **アプリの連絡先メール**: あなたのメールアドレス
   - **ビジネスアカウント**: 既存のものを選択、または「新規作成」をクリック

4. 「**アプリを作成**」ボタンをクリック

5. セキュリティチェック（CAPTCHA）が表示されたら、完了する

---

## ステップ3: App IDをコピー

1. アプリダッシュボードが表示される
2. 左側のメニューから「**設定**」をクリック
3. 「**基本設定**」をクリック（設定の下に表示される）
4. ページ上部の「**基本**」セクションに「**アプリID**」が表示される
5. アプリIDの数字をコピー（例: `1234567890123456`）
   - この数字をメモ帳などに保存しておく

---

## ステップ4: App Secretを取得

1. 同じ「基本設定」ページで、下にスクロール
2. 「**アプリシークレット**」というセクションを見つける
3. 「**表示**」ボタンをクリック
4. パスワードを入力して「**送信**」をクリック
5. 表示された文字列をコピー（例: `a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6`）
   - ⚠️ **重要**: この値は一度しか表示されません。必ずメモ帳に保存してください

---

## ステップ5: Facebook Loginを追加

1. 左側のメニューから「**製品**」をクリック
2. 製品一覧の中から「**Facebook Login**」を見つける
3. 「**セットアップ**」ボタンをクリック
4. 設定画面が開く

---

## ステップ6: OAuth Redirect URIを設定

1. Facebook Loginの設定画面で、「**設定**」タブをクリック
2. ページを下にスクロールして「**クライアントOAuth設定**」セクションを見つける
3. 「**有効なOAuthリダイレクトURI**」という項目を見つける
4. テキストボックスに以下を入力：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
5. 「**変更を保存**」ボタンをクリック（ページ下部にある）

---

## ステップ7: 権限を追加

1. 左側のメニューから「**アプリレビュー**」をクリック
2. 「**権限と機能**」をクリック
3. 検索ボックスに「ads_read」と入力
4. 「**ads_read**」を見つけて、「**権限を追加**」ボタンをクリック
5. 同様に「ads_management」を検索して、「**権限を追加**」ボタンをクリック

**注意**: 開発モードでは、アプリの管理者のみがこれらの権限を使用できます。

---

## ステップ8: 環境変数を設定

1. プロジェクトの`backend`フォルダを開く
2. `.env`ファイルを開く（テキストエディタで）
3. ファイルの最後に以下を追加：

```bash
# Meta OAuth設定
META_APP_ID=ここにステップ3でコピーしたApp IDを貼り付け
META_APP_SECRET=ここにステップ4でコピーしたApp Secretを貼り付け
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

**例**:
```bash
# Meta OAuth設定
META_APP_ID=1234567890123456
META_APP_SECRET=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

4. ファイルを保存

---

## ステップ9: バックエンドサーバーを再起動

1. バックエンドサーバーが起動している場合は、停止する（Ctrl+C）
2. ターミナルで以下を実行：

```bash
cd backend
./venv/bin/python3 -m uvicorn app.main:app --host 127.0.0.1 --port 8000 --reload
```

3. サーバーが起動したことを確認（エラーが出ないこと）

---

## ステップ10: 動作確認

1. ブラウザで `http://localhost:3000` を開く
2. ログインする
3. 左側のメニューから「**設定**」をクリック
4. ページを下にスクロールして「**Meta広告アカウント連携**」セクションを見つける
5. 「**Metaでログインして連携**」という青いボタンをクリック
6. Metaのログイン画面が表示されることを確認
7. Metaアカウントでログイン
8. 「**続行**」または「**許可**」ボタンをクリック
9. 設定画面に戻り、「**Meta広告アカウントID**」の欄に`act_`で始まるIDが自動入力されていることを確認

---

## エラーが出た場合

### エラー: "Meta OAuthが設定されていません"

**やること**:
1. `backend/.env`ファイルを開く
2. `META_APP_ID=`の後に数字が入っているか確認
3. 入っていない場合は、ステップ8をやり直す
4. バックエンドサーバーを再起動（ステップ9）

### エラー: "Invalid redirect_uri"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「製品」→「Facebook Login」→「設定」を開く
3. 「有効なOAuthリダイレクトURI」に以下が**完全に一致**しているか確認：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
4. 一致していない場合は、正しく入力して「変更を保存」

### エラー: "Insufficient permissions"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「アプリレビュー」→「権限と機能」を開く
3. `ads_read`と`ads_management`が追加されているか確認
4. 追加されていない場合は、ステップ7をやり直す

### エラー: "広告アカウントが見つかりませんでした"

**やること**:
1. https://business.facebook.com/adsmanager/ にアクセス
2. 広告アカウントが存在するか確認
3. 存在しない場合は、広告アカウントを作成する

---

## 完了

これで設定は完了です。ユーザーは「Metaでログインして連携」ボタンをクリックするだけで、Metaアカウントを連携できるようになります。

## 前提条件
- Meta（Facebook）アカウントを持っていること
- 広告アカウントを持っていること（または作成できること）

---

## ステップ1: Meta for Developersにアクセス

1. ブラウザで以下のURLを開く：
   ```
   https://developers.facebook.com/apps/
   ```

2. Metaアカウントでログインしていない場合は、ログインする

---

## ステップ2: アプリを作成

1. ページ右上の「**アプリを作成**」ボタンをクリック
   - 青いボタンです

2. ポップアップが表示されるので：
   - 「**ビジネス**」を選択
   - 「**次へ**」をクリック

3. アプリ情報を入力：
   - **アプリ名**: 例「MIERU AI」など、任意の名前
   - **アプリの連絡先メール**: あなたのメールアドレス
   - **ビジネスアカウント**: 既存のものを選択、または「新規作成」をクリック

4. 「**アプリを作成**」ボタンをクリック

5. セキュリティチェック（CAPTCHA）が表示されたら、完了する

---

## ステップ3: App IDをコピー

1. アプリダッシュボードが表示される
2. 左側のメニューから「**設定**」をクリック
3. 「**基本設定**」をクリック（設定の下に表示される）
4. ページ上部の「**基本**」セクションに「**アプリID**」が表示される
5. アプリIDの数字をコピー（例: `1234567890123456`）
   - この数字をメモ帳などに保存しておく

---

## ステップ4: App Secretを取得

1. 同じ「基本設定」ページで、下にスクロール
2. 「**アプリシークレット**」というセクションを見つける
3. 「**表示**」ボタンをクリック
4. パスワードを入力して「**送信**」をクリック
5. 表示された文字列をコピー（例: `a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6`）
   - ⚠️ **重要**: この値は一度しか表示されません。必ずメモ帳に保存してください

---

## ステップ5: Facebook Loginを追加

1. 左側のメニューから「**製品**」をクリック
2. 製品一覧の中から「**Facebook Login**」を見つける
3. 「**セットアップ**」ボタンをクリック
4. 設定画面が開く

---

## ステップ6: OAuth Redirect URIを設定

1. Facebook Loginの設定画面で、「**設定**」タブをクリック
2. ページを下にスクロールして「**クライアントOAuth設定**」セクションを見つける
3. 「**有効なOAuthリダイレクトURI**」という項目を見つける
4. テキストボックスに以下を入力：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
5. 「**変更を保存**」ボタンをクリック（ページ下部にある）

---

## ステップ7: 権限を追加

1. 左側のメニューから「**アプリレビュー**」をクリック
2. 「**権限と機能**」をクリック
3. 検索ボックスに「ads_read」と入力
4. 「**ads_read**」を見つけて、「**権限を追加**」ボタンをクリック
5. 同様に「ads_management」を検索して、「**権限を追加**」ボタンをクリック

**注意**: 開発モードでは、アプリの管理者のみがこれらの権限を使用できます。

---

## ステップ8: 環境変数を設定

1. プロジェクトの`backend`フォルダを開く
2. `.env`ファイルを開く（テキストエディタで）
3. ファイルの最後に以下を追加：

```bash
# Meta OAuth設定
META_APP_ID=ここにステップ3でコピーしたApp IDを貼り付け
META_APP_SECRET=ここにステップ4でコピーしたApp Secretを貼り付け
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

**例**:
```bash
# Meta OAuth設定
META_APP_ID=1234567890123456
META_APP_SECRET=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

4. ファイルを保存

---

## ステップ9: バックエンドサーバーを再起動

1. バックエンドサーバーが起動している場合は、停止する（Ctrl+C）
2. ターミナルで以下を実行：

```bash
cd backend
./venv/bin/python3 -m uvicorn app.main:app --host 127.0.0.1 --port 8000 --reload
```

3. サーバーが起動したことを確認（エラーが出ないこと）

---

## ステップ10: 動作確認

1. ブラウザで `http://localhost:3000` を開く
2. ログインする
3. 左側のメニューから「**設定**」をクリック
4. ページを下にスクロールして「**Meta広告アカウント連携**」セクションを見つける
5. 「**Metaでログインして連携**」という青いボタンをクリック
6. Metaのログイン画面が表示されることを確認
7. Metaアカウントでログイン
8. 「**続行**」または「**許可**」ボタンをクリック
9. 設定画面に戻り、「**Meta広告アカウントID**」の欄に`act_`で始まるIDが自動入力されていることを確認

---

## エラーが出た場合

### エラー: "Meta OAuthが設定されていません"

**やること**:
1. `backend/.env`ファイルを開く
2. `META_APP_ID=`の後に数字が入っているか確認
3. 入っていない場合は、ステップ8をやり直す
4. バックエンドサーバーを再起動（ステップ9）

### エラー: "Invalid redirect_uri"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「製品」→「Facebook Login」→「設定」を開く
3. 「有効なOAuthリダイレクトURI」に以下が**完全に一致**しているか確認：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
4. 一致していない場合は、正しく入力して「変更を保存」

### エラー: "Insufficient permissions"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「アプリレビュー」→「権限と機能」を開く
3. `ads_read`と`ads_management`が追加されているか確認
4. 追加されていない場合は、ステップ7をやり直す

### エラー: "広告アカウントが見つかりませんでした"

**やること**:
1. https://business.facebook.com/adsmanager/ にアクセス
2. 広告アカウントが存在するか確認
3. 存在しない場合は、広告アカウントを作成する

---

## 完了

これで設定は完了です。ユーザーは「Metaでログインして連携」ボタンをクリックするだけで、Metaアカウントを連携できるようになります。

## 前提条件
- Meta（Facebook）アカウントを持っていること
- 広告アカウントを持っていること（または作成できること）

---

## ステップ1: Meta for Developersにアクセス

1. ブラウザで以下のURLを開く：
   ```
   https://developers.facebook.com/apps/
   ```

2. Metaアカウントでログインしていない場合は、ログインする

---

## ステップ2: アプリを作成

1. ページ右上の「**アプリを作成**」ボタンをクリック
   - 青いボタンです

2. ポップアップが表示されるので：
   - 「**ビジネス**」を選択
   - 「**次へ**」をクリック

3. アプリ情報を入力：
   - **アプリ名**: 例「MIERU AI」など、任意の名前
   - **アプリの連絡先メール**: あなたのメールアドレス
   - **ビジネスアカウント**: 既存のものを選択、または「新規作成」をクリック

4. 「**アプリを作成**」ボタンをクリック

5. セキュリティチェック（CAPTCHA）が表示されたら、完了する

---

## ステップ3: App IDをコピー

1. アプリダッシュボードが表示される
2. 左側のメニューから「**設定**」をクリック
3. 「**基本設定**」をクリック（設定の下に表示される）
4. ページ上部の「**基本**」セクションに「**アプリID**」が表示される
5. アプリIDの数字をコピー（例: `1234567890123456`）
   - この数字をメモ帳などに保存しておく

---

## ステップ4: App Secretを取得

1. 同じ「基本設定」ページで、下にスクロール
2. 「**アプリシークレット**」というセクションを見つける
3. 「**表示**」ボタンをクリック
4. パスワードを入力して「**送信**」をクリック
5. 表示された文字列をコピー（例: `a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6`）
   - ⚠️ **重要**: この値は一度しか表示されません。必ずメモ帳に保存してください

---

## ステップ5: Facebook Loginを追加

1. 左側のメニューから「**製品**」をクリック
2. 製品一覧の中から「**Facebook Login**」を見つける
3. 「**セットアップ**」ボタンをクリック
4. 設定画面が開く

---

## ステップ6: OAuth Redirect URIを設定

1. Facebook Loginの設定画面で、「**設定**」タブをクリック
2. ページを下にスクロールして「**クライアントOAuth設定**」セクションを見つける
3. 「**有効なOAuthリダイレクトURI**」という項目を見つける
4. テキストボックスに以下を入力：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
5. 「**変更を保存**」ボタンをクリック（ページ下部にある）

---

## ステップ7: 権限を追加

1. 左側のメニューから「**アプリレビュー**」をクリック
2. 「**権限と機能**」をクリック
3. 検索ボックスに「ads_read」と入力
4. 「**ads_read**」を見つけて、「**権限を追加**」ボタンをクリック
5. 同様に「ads_management」を検索して、「**権限を追加**」ボタンをクリック

**注意**: 開発モードでは、アプリの管理者のみがこれらの権限を使用できます。

---

## ステップ8: 環境変数を設定

1. プロジェクトの`backend`フォルダを開く
2. `.env`ファイルを開く（テキストエディタで）
3. ファイルの最後に以下を追加：

```bash
# Meta OAuth設定
META_APP_ID=ここにステップ3でコピーしたApp IDを貼り付け
META_APP_SECRET=ここにステップ4でコピーしたApp Secretを貼り付け
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

**例**:
```bash
# Meta OAuth設定
META_APP_ID=1234567890123456
META_APP_SECRET=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

4. ファイルを保存

---

## ステップ9: バックエンドサーバーを再起動

1. バックエンドサーバーが起動している場合は、停止する（Ctrl+C）
2. ターミナルで以下を実行：

```bash
cd backend
./venv/bin/python3 -m uvicorn app.main:app --host 127.0.0.1 --port 8000 --reload
```

3. サーバーが起動したことを確認（エラーが出ないこと）

---

## ステップ10: 動作確認

1. ブラウザで `http://localhost:3000` を開く
2. ログインする
3. 左側のメニューから「**設定**」をクリック
4. ページを下にスクロールして「**Meta広告アカウント連携**」セクションを見つける
5. 「**Metaでログインして連携**」という青いボタンをクリック
6. Metaのログイン画面が表示されることを確認
7. Metaアカウントでログイン
8. 「**続行**」または「**許可**」ボタンをクリック
9. 設定画面に戻り、「**Meta広告アカウントID**」の欄に`act_`で始まるIDが自動入力されていることを確認

---

## エラーが出た場合

### エラー: "Meta OAuthが設定されていません"

**やること**:
1. `backend/.env`ファイルを開く
2. `META_APP_ID=`の後に数字が入っているか確認
3. 入っていない場合は、ステップ8をやり直す
4. バックエンドサーバーを再起動（ステップ9）

### エラー: "Invalid redirect_uri"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「製品」→「Facebook Login」→「設定」を開く
3. 「有効なOAuthリダイレクトURI」に以下が**完全に一致**しているか確認：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
4. 一致していない場合は、正しく入力して「変更を保存」

### エラー: "Insufficient permissions"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「アプリレビュー」→「権限と機能」を開く
3. `ads_read`と`ads_management`が追加されているか確認
4. 追加されていない場合は、ステップ7をやり直す

### エラー: "広告アカウントが見つかりませんでした"

**やること**:
1. https://business.facebook.com/adsmanager/ にアクセス
2. 広告アカウントが存在するか確認
3. 存在しない場合は、広告アカウントを作成する

---

## 完了

これで設定は完了です。ユーザーは「Metaでログインして連携」ボタンをクリックするだけで、Metaアカウントを連携できるようになります。

## 前提条件
- Meta（Facebook）アカウントを持っていること
- 広告アカウントを持っていること（または作成できること）

---

## ステップ1: Meta for Developersにアクセス

1. ブラウザで以下のURLを開く：
   ```
   https://developers.facebook.com/apps/
   ```

2. Metaアカウントでログインしていない場合は、ログインする

---

## ステップ2: アプリを作成

1. ページ右上の「**アプリを作成**」ボタンをクリック
   - 青いボタンです

2. ポップアップが表示されるので：
   - 「**ビジネス**」を選択
   - 「**次へ**」をクリック

3. アプリ情報を入力：
   - **アプリ名**: 例「MIERU AI」など、任意の名前
   - **アプリの連絡先メール**: あなたのメールアドレス
   - **ビジネスアカウント**: 既存のものを選択、または「新規作成」をクリック

4. 「**アプリを作成**」ボタンをクリック

5. セキュリティチェック（CAPTCHA）が表示されたら、完了する

---

## ステップ3: App IDをコピー

1. アプリダッシュボードが表示される
2. 左側のメニューから「**設定**」をクリック
3. 「**基本設定**」をクリック（設定の下に表示される）
4. ページ上部の「**基本**」セクションに「**アプリID**」が表示される
5. アプリIDの数字をコピー（例: `1234567890123456`）
   - この数字をメモ帳などに保存しておく

---

## ステップ4: App Secretを取得

1. 同じ「基本設定」ページで、下にスクロール
2. 「**アプリシークレット**」というセクションを見つける
3. 「**表示**」ボタンをクリック
4. パスワードを入力して「**送信**」をクリック
5. 表示された文字列をコピー（例: `a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6`）
   - ⚠️ **重要**: この値は一度しか表示されません。必ずメモ帳に保存してください

---

## ステップ5: Facebook Loginを追加

1. 左側のメニューから「**製品**」をクリック
2. 製品一覧の中から「**Facebook Login**」を見つける
3. 「**セットアップ**」ボタンをクリック
4. 設定画面が開く

---

## ステップ6: OAuth Redirect URIを設定

1. Facebook Loginの設定画面で、「**設定**」タブをクリック
2. ページを下にスクロールして「**クライアントOAuth設定**」セクションを見つける
3. 「**有効なOAuthリダイレクトURI**」という項目を見つける
4. テキストボックスに以下を入力：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
5. 「**変更を保存**」ボタンをクリック（ページ下部にある）

---

## ステップ7: 権限を追加

1. 左側のメニューから「**アプリレビュー**」をクリック
2. 「**権限と機能**」をクリック
3. 検索ボックスに「ads_read」と入力
4. 「**ads_read**」を見つけて、「**権限を追加**」ボタンをクリック
5. 同様に「ads_management」を検索して、「**権限を追加**」ボタンをクリック

**注意**: 開発モードでは、アプリの管理者のみがこれらの権限を使用できます。

---

## ステップ8: 環境変数を設定

1. プロジェクトの`backend`フォルダを開く
2. `.env`ファイルを開く（テキストエディタで）
3. ファイルの最後に以下を追加：

```bash
# Meta OAuth設定
META_APP_ID=ここにステップ3でコピーしたApp IDを貼り付け
META_APP_SECRET=ここにステップ4でコピーしたApp Secretを貼り付け
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

**例**:
```bash
# Meta OAuth設定
META_APP_ID=1234567890123456
META_APP_SECRET=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

4. ファイルを保存

---

## ステップ9: バックエンドサーバーを再起動

1. バックエンドサーバーが起動している場合は、停止する（Ctrl+C）
2. ターミナルで以下を実行：

```bash
cd backend
./venv/bin/python3 -m uvicorn app.main:app --host 127.0.0.1 --port 8000 --reload
```

3. サーバーが起動したことを確認（エラーが出ないこと）

---

## ステップ10: 動作確認

1. ブラウザで `http://localhost:3000` を開く
2. ログインする
3. 左側のメニューから「**設定**」をクリック
4. ページを下にスクロールして「**Meta広告アカウント連携**」セクションを見つける
5. 「**Metaでログインして連携**」という青いボタンをクリック
6. Metaのログイン画面が表示されることを確認
7. Metaアカウントでログイン
8. 「**続行**」または「**許可**」ボタンをクリック
9. 設定画面に戻り、「**Meta広告アカウントID**」の欄に`act_`で始まるIDが自動入力されていることを確認

---

## エラーが出た場合

### エラー: "Meta OAuthが設定されていません"

**やること**:
1. `backend/.env`ファイルを開く
2. `META_APP_ID=`の後に数字が入っているか確認
3. 入っていない場合は、ステップ8をやり直す
4. バックエンドサーバーを再起動（ステップ9）

### エラー: "Invalid redirect_uri"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「製品」→「Facebook Login」→「設定」を開く
3. 「有効なOAuthリダイレクトURI」に以下が**完全に一致**しているか確認：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
4. 一致していない場合は、正しく入力して「変更を保存」

### エラー: "Insufficient permissions"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「アプリレビュー」→「権限と機能」を開く
3. `ads_read`と`ads_management`が追加されているか確認
4. 追加されていない場合は、ステップ7をやり直す

### エラー: "広告アカウントが見つかりませんでした"

**やること**:
1. https://business.facebook.com/adsmanager/ にアクセス
2. 広告アカウントが存在するか確認
3. 存在しない場合は、広告アカウントを作成する

---

## 完了

これで設定は完了です。ユーザーは「Metaでログインして連携」ボタンをクリックするだけで、Metaアカウントを連携できるようになります。

## 前提条件
- Meta（Facebook）アカウントを持っていること
- 広告アカウントを持っていること（または作成できること）

---

## ステップ1: Meta for Developersにアクセス

1. ブラウザで以下のURLを開く：
   ```
   https://developers.facebook.com/apps/
   ```

2. Metaアカウントでログインしていない場合は、ログインする

---

## ステップ2: アプリを作成

1. ページ右上の「**アプリを作成**」ボタンをクリック
   - 青いボタンです

2. ポップアップが表示されるので：
   - 「**ビジネス**」を選択
   - 「**次へ**」をクリック

3. アプリ情報を入力：
   - **アプリ名**: 例「MIERU AI」など、任意の名前
   - **アプリの連絡先メール**: あなたのメールアドレス
   - **ビジネスアカウント**: 既存のものを選択、または「新規作成」をクリック

4. 「**アプリを作成**」ボタンをクリック

5. セキュリティチェック（CAPTCHA）が表示されたら、完了する

---

## ステップ3: App IDをコピー

1. アプリダッシュボードが表示される
2. 左側のメニューから「**設定**」をクリック
3. 「**基本設定**」をクリック（設定の下に表示される）
4. ページ上部の「**基本**」セクションに「**アプリID**」が表示される
5. アプリIDの数字をコピー（例: `1234567890123456`）
   - この数字をメモ帳などに保存しておく

---

## ステップ4: App Secretを取得

1. 同じ「基本設定」ページで、下にスクロール
2. 「**アプリシークレット**」というセクションを見つける
3. 「**表示**」ボタンをクリック
4. パスワードを入力して「**送信**」をクリック
5. 表示された文字列をコピー（例: `a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6`）
   - ⚠️ **重要**: この値は一度しか表示されません。必ずメモ帳に保存してください

---

## ステップ5: Facebook Loginを追加

1. 左側のメニューから「**製品**」をクリック
2. 製品一覧の中から「**Facebook Login**」を見つける
3. 「**セットアップ**」ボタンをクリック
4. 設定画面が開く

---

## ステップ6: OAuth Redirect URIを設定

1. Facebook Loginの設定画面で、「**設定**」タブをクリック
2. ページを下にスクロールして「**クライアントOAuth設定**」セクションを見つける
3. 「**有効なOAuthリダイレクトURI**」という項目を見つける
4. テキストボックスに以下を入力：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
5. 「**変更を保存**」ボタンをクリック（ページ下部にある）

---

## ステップ7: 権限を追加

1. 左側のメニューから「**アプリレビュー**」をクリック
2. 「**権限と機能**」をクリック
3. 検索ボックスに「ads_read」と入力
4. 「**ads_read**」を見つけて、「**権限を追加**」ボタンをクリック
5. 同様に「ads_management」を検索して、「**権限を追加**」ボタンをクリック

**注意**: 開発モードでは、アプリの管理者のみがこれらの権限を使用できます。

---

## ステップ8: 環境変数を設定

1. プロジェクトの`backend`フォルダを開く
2. `.env`ファイルを開く（テキストエディタで）
3. ファイルの最後に以下を追加：

```bash
# Meta OAuth設定
META_APP_ID=ここにステップ3でコピーしたApp IDを貼り付け
META_APP_SECRET=ここにステップ4でコピーしたApp Secretを貼り付け
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

**例**:
```bash
# Meta OAuth設定
META_APP_ID=1234567890123456
META_APP_SECRET=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

4. ファイルを保存

---

## ステップ9: バックエンドサーバーを再起動

1. バックエンドサーバーが起動している場合は、停止する（Ctrl+C）
2. ターミナルで以下を実行：

```bash
cd backend
./venv/bin/python3 -m uvicorn app.main:app --host 127.0.0.1 --port 8000 --reload
```

3. サーバーが起動したことを確認（エラーが出ないこと）

---

## ステップ10: 動作確認

1. ブラウザで `http://localhost:3000` を開く
2. ログインする
3. 左側のメニューから「**設定**」をクリック
4. ページを下にスクロールして「**Meta広告アカウント連携**」セクションを見つける
5. 「**Metaでログインして連携**」という青いボタンをクリック
6. Metaのログイン画面が表示されることを確認
7. Metaアカウントでログイン
8. 「**続行**」または「**許可**」ボタンをクリック
9. 設定画面に戻り、「**Meta広告アカウントID**」の欄に`act_`で始まるIDが自動入力されていることを確認

---

## エラーが出た場合

### エラー: "Meta OAuthが設定されていません"

**やること**:
1. `backend/.env`ファイルを開く
2. `META_APP_ID=`の後に数字が入っているか確認
3. 入っていない場合は、ステップ8をやり直す
4. バックエンドサーバーを再起動（ステップ9）

### エラー: "Invalid redirect_uri"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「製品」→「Facebook Login」→「設定」を開く
3. 「有効なOAuthリダイレクトURI」に以下が**完全に一致**しているか確認：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
4. 一致していない場合は、正しく入力して「変更を保存」

### エラー: "Insufficient permissions"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「アプリレビュー」→「権限と機能」を開く
3. `ads_read`と`ads_management`が追加されているか確認
4. 追加されていない場合は、ステップ7をやり直す

### エラー: "広告アカウントが見つかりませんでした"

**やること**:
1. https://business.facebook.com/adsmanager/ にアクセス
2. 広告アカウントが存在するか確認
3. 存在しない場合は、広告アカウントを作成する

---

## 完了

これで設定は完了です。ユーザーは「Metaでログインして連携」ボタンをクリックするだけで、Metaアカウントを連携できるようになります。

## 前提条件
- Meta（Facebook）アカウントを持っていること
- 広告アカウントを持っていること（または作成できること）

---

## ステップ1: Meta for Developersにアクセス

1. ブラウザで以下のURLを開く：
   ```
   https://developers.facebook.com/apps/
   ```

2. Metaアカウントでログインしていない場合は、ログインする

---

## ステップ2: アプリを作成

1. ページ右上の「**アプリを作成**」ボタンをクリック
   - 青いボタンです

2. ポップアップが表示されるので：
   - 「**ビジネス**」を選択
   - 「**次へ**」をクリック

3. アプリ情報を入力：
   - **アプリ名**: 例「MIERU AI」など、任意の名前
   - **アプリの連絡先メール**: あなたのメールアドレス
   - **ビジネスアカウント**: 既存のものを選択、または「新規作成」をクリック

4. 「**アプリを作成**」ボタンをクリック

5. セキュリティチェック（CAPTCHA）が表示されたら、完了する

---

## ステップ3: App IDをコピー

1. アプリダッシュボードが表示される
2. 左側のメニューから「**設定**」をクリック
3. 「**基本設定**」をクリック（設定の下に表示される）
4. ページ上部の「**基本**」セクションに「**アプリID**」が表示される
5. アプリIDの数字をコピー（例: `1234567890123456`）
   - この数字をメモ帳などに保存しておく

---

## ステップ4: App Secretを取得

1. 同じ「基本設定」ページで、下にスクロール
2. 「**アプリシークレット**」というセクションを見つける
3. 「**表示**」ボタンをクリック
4. パスワードを入力して「**送信**」をクリック
5. 表示された文字列をコピー（例: `a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6`）
   - ⚠️ **重要**: この値は一度しか表示されません。必ずメモ帳に保存してください

---

## ステップ5: Facebook Loginを追加

1. 左側のメニューから「**製品**」をクリック
2. 製品一覧の中から「**Facebook Login**」を見つける
3. 「**セットアップ**」ボタンをクリック
4. 設定画面が開く

---

## ステップ6: OAuth Redirect URIを設定

1. Facebook Loginの設定画面で、「**設定**」タブをクリック
2. ページを下にスクロールして「**クライアントOAuth設定**」セクションを見つける
3. 「**有効なOAuthリダイレクトURI**」という項目を見つける
4. テキストボックスに以下を入力：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
5. 「**変更を保存**」ボタンをクリック（ページ下部にある）

---

## ステップ7: 権限を追加

1. 左側のメニューから「**アプリレビュー**」をクリック
2. 「**権限と機能**」をクリック
3. 検索ボックスに「ads_read」と入力
4. 「**ads_read**」を見つけて、「**権限を追加**」ボタンをクリック
5. 同様に「ads_management」を検索して、「**権限を追加**」ボタンをクリック

**注意**: 開発モードでは、アプリの管理者のみがこれらの権限を使用できます。

---

## ステップ8: 環境変数を設定

1. プロジェクトの`backend`フォルダを開く
2. `.env`ファイルを開く（テキストエディタで）
3. ファイルの最後に以下を追加：

```bash
# Meta OAuth設定
META_APP_ID=ここにステップ3でコピーしたApp IDを貼り付け
META_APP_SECRET=ここにステップ4でコピーしたApp Secretを貼り付け
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

**例**:
```bash
# Meta OAuth設定
META_APP_ID=1234567890123456
META_APP_SECRET=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

4. ファイルを保存

---

## ステップ9: バックエンドサーバーを再起動

1. バックエンドサーバーが起動している場合は、停止する（Ctrl+C）
2. ターミナルで以下を実行：

```bash
cd backend
./venv/bin/python3 -m uvicorn app.main:app --host 127.0.0.1 --port 8000 --reload
```

3. サーバーが起動したことを確認（エラーが出ないこと）

---

## ステップ10: 動作確認

1. ブラウザで `http://localhost:3000` を開く
2. ログインする
3. 左側のメニューから「**設定**」をクリック
4. ページを下にスクロールして「**Meta広告アカウント連携**」セクションを見つける
5. 「**Metaでログインして連携**」という青いボタンをクリック
6. Metaのログイン画面が表示されることを確認
7. Metaアカウントでログイン
8. 「**続行**」または「**許可**」ボタンをクリック
9. 設定画面に戻り、「**Meta広告アカウントID**」の欄に`act_`で始まるIDが自動入力されていることを確認

---

## エラーが出た場合

### エラー: "Meta OAuthが設定されていません"

**やること**:
1. `backend/.env`ファイルを開く
2. `META_APP_ID=`の後に数字が入っているか確認
3. 入っていない場合は、ステップ8をやり直す
4. バックエンドサーバーを再起動（ステップ9）

### エラー: "Invalid redirect_uri"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「製品」→「Facebook Login」→「設定」を開く
3. 「有効なOAuthリダイレクトURI」に以下が**完全に一致**しているか確認：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
4. 一致していない場合は、正しく入力して「変更を保存」

### エラー: "Insufficient permissions"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「アプリレビュー」→「権限と機能」を開く
3. `ads_read`と`ads_management`が追加されているか確認
4. 追加されていない場合は、ステップ7をやり直す

### エラー: "広告アカウントが見つかりませんでした"

**やること**:
1. https://business.facebook.com/adsmanager/ にアクセス
2. 広告アカウントが存在するか確認
3. 存在しない場合は、広告アカウントを作成する

---

## 完了

これで設定は完了です。ユーザーは「Metaでログインして連携」ボタンをクリックするだけで、Metaアカウントを連携できるようになります。

## 前提条件
- Meta（Facebook）アカウントを持っていること
- 広告アカウントを持っていること（または作成できること）

---

## ステップ1: Meta for Developersにアクセス

1. ブラウザで以下のURLを開く：
   ```
   https://developers.facebook.com/apps/
   ```

2. Metaアカウントでログインしていない場合は、ログインする

---

## ステップ2: アプリを作成

1. ページ右上の「**アプリを作成**」ボタンをクリック
   - 青いボタンです

2. ポップアップが表示されるので：
   - 「**ビジネス**」を選択
   - 「**次へ**」をクリック

3. アプリ情報を入力：
   - **アプリ名**: 例「MIERU AI」など、任意の名前
   - **アプリの連絡先メール**: あなたのメールアドレス
   - **ビジネスアカウント**: 既存のものを選択、または「新規作成」をクリック

4. 「**アプリを作成**」ボタンをクリック

5. セキュリティチェック（CAPTCHA）が表示されたら、完了する

---

## ステップ3: App IDをコピー

1. アプリダッシュボードが表示される
2. 左側のメニューから「**設定**」をクリック
3. 「**基本設定**」をクリック（設定の下に表示される）
4. ページ上部の「**基本**」セクションに「**アプリID**」が表示される
5. アプリIDの数字をコピー（例: `1234567890123456`）
   - この数字をメモ帳などに保存しておく

---

## ステップ4: App Secretを取得

1. 同じ「基本設定」ページで、下にスクロール
2. 「**アプリシークレット**」というセクションを見つける
3. 「**表示**」ボタンをクリック
4. パスワードを入力して「**送信**」をクリック
5. 表示された文字列をコピー（例: `a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6`）
   - ⚠️ **重要**: この値は一度しか表示されません。必ずメモ帳に保存してください

---

## ステップ5: Facebook Loginを追加

1. 左側のメニューから「**製品**」をクリック
2. 製品一覧の中から「**Facebook Login**」を見つける
3. 「**セットアップ**」ボタンをクリック
4. 設定画面が開く

---

## ステップ6: OAuth Redirect URIを設定

1. Facebook Loginの設定画面で、「**設定**」タブをクリック
2. ページを下にスクロールして「**クライアントOAuth設定**」セクションを見つける
3. 「**有効なOAuthリダイレクトURI**」という項目を見つける
4. テキストボックスに以下を入力：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
5. 「**変更を保存**」ボタンをクリック（ページ下部にある）

---

## ステップ7: 権限を追加

1. 左側のメニューから「**アプリレビュー**」をクリック
2. 「**権限と機能**」をクリック
3. 検索ボックスに「ads_read」と入力
4. 「**ads_read**」を見つけて、「**権限を追加**」ボタンをクリック
5. 同様に「ads_management」を検索して、「**権限を追加**」ボタンをクリック

**注意**: 開発モードでは、アプリの管理者のみがこれらの権限を使用できます。

---

## ステップ8: 環境変数を設定

1. プロジェクトの`backend`フォルダを開く
2. `.env`ファイルを開く（テキストエディタで）
3. ファイルの最後に以下を追加：

```bash
# Meta OAuth設定
META_APP_ID=ここにステップ3でコピーしたApp IDを貼り付け
META_APP_SECRET=ここにステップ4でコピーしたApp Secretを貼り付け
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

**例**:
```bash
# Meta OAuth設定
META_APP_ID=1234567890123456
META_APP_SECRET=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

4. ファイルを保存

---

## ステップ9: バックエンドサーバーを再起動

1. バックエンドサーバーが起動している場合は、停止する（Ctrl+C）
2. ターミナルで以下を実行：

```bash
cd backend
./venv/bin/python3 -m uvicorn app.main:app --host 127.0.0.1 --port 8000 --reload
```

3. サーバーが起動したことを確認（エラーが出ないこと）

---

## ステップ10: 動作確認

1. ブラウザで `http://localhost:3000` を開く
2. ログインする
3. 左側のメニューから「**設定**」をクリック
4. ページを下にスクロールして「**Meta広告アカウント連携**」セクションを見つける
5. 「**Metaでログインして連携**」という青いボタンをクリック
6. Metaのログイン画面が表示されることを確認
7. Metaアカウントでログイン
8. 「**続行**」または「**許可**」ボタンをクリック
9. 設定画面に戻り、「**Meta広告アカウントID**」の欄に`act_`で始まるIDが自動入力されていることを確認

---

## エラーが出た場合

### エラー: "Meta OAuthが設定されていません"

**やること**:
1. `backend/.env`ファイルを開く
2. `META_APP_ID=`の後に数字が入っているか確認
3. 入っていない場合は、ステップ8をやり直す
4. バックエンドサーバーを再起動（ステップ9）

### エラー: "Invalid redirect_uri"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「製品」→「Facebook Login」→「設定」を開く
3. 「有効なOAuthリダイレクトURI」に以下が**完全に一致**しているか確認：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
4. 一致していない場合は、正しく入力して「変更を保存」

### エラー: "Insufficient permissions"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「アプリレビュー」→「権限と機能」を開く
3. `ads_read`と`ads_management`が追加されているか確認
4. 追加されていない場合は、ステップ7をやり直す

### エラー: "広告アカウントが見つかりませんでした"

**やること**:
1. https://business.facebook.com/adsmanager/ にアクセス
2. 広告アカウントが存在するか確認
3. 存在しない場合は、広告アカウントを作成する

---

## 完了

これで設定は完了です。ユーザーは「Metaでログインして連携」ボタンをクリックするだけで、Metaアカウントを連携できるようになります。

## 前提条件
- Meta（Facebook）アカウントを持っていること
- 広告アカウントを持っていること（または作成できること）

---

## ステップ1: Meta for Developersにアクセス

1. ブラウザで以下のURLを開く：
   ```
   https://developers.facebook.com/apps/
   ```

2. Metaアカウントでログインしていない場合は、ログインする

---

## ステップ2: アプリを作成

1. ページ右上の「**アプリを作成**」ボタンをクリック
   - 青いボタンです

2. ポップアップが表示されるので：
   - 「**ビジネス**」を選択
   - 「**次へ**」をクリック

3. アプリ情報を入力：
   - **アプリ名**: 例「MIERU AI」など、任意の名前
   - **アプリの連絡先メール**: あなたのメールアドレス
   - **ビジネスアカウント**: 既存のものを選択、または「新規作成」をクリック

4. 「**アプリを作成**」ボタンをクリック

5. セキュリティチェック（CAPTCHA）が表示されたら、完了する

---

## ステップ3: App IDをコピー

1. アプリダッシュボードが表示される
2. 左側のメニューから「**設定**」をクリック
3. 「**基本設定**」をクリック（設定の下に表示される）
4. ページ上部の「**基本**」セクションに「**アプリID**」が表示される
5. アプリIDの数字をコピー（例: `1234567890123456`）
   - この数字をメモ帳などに保存しておく

---

## ステップ4: App Secretを取得

1. 同じ「基本設定」ページで、下にスクロール
2. 「**アプリシークレット**」というセクションを見つける
3. 「**表示**」ボタンをクリック
4. パスワードを入力して「**送信**」をクリック
5. 表示された文字列をコピー（例: `a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6`）
   - ⚠️ **重要**: この値は一度しか表示されません。必ずメモ帳に保存してください

---

## ステップ5: Facebook Loginを追加

1. 左側のメニューから「**製品**」をクリック
2. 製品一覧の中から「**Facebook Login**」を見つける
3. 「**セットアップ**」ボタンをクリック
4. 設定画面が開く

---

## ステップ6: OAuth Redirect URIを設定

1. Facebook Loginの設定画面で、「**設定**」タブをクリック
2. ページを下にスクロールして「**クライアントOAuth設定**」セクションを見つける
3. 「**有効なOAuthリダイレクトURI**」という項目を見つける
4. テキストボックスに以下を入力：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
5. 「**変更を保存**」ボタンをクリック（ページ下部にある）

---

## ステップ7: 権限を追加

1. 左側のメニューから「**アプリレビュー**」をクリック
2. 「**権限と機能**」をクリック
3. 検索ボックスに「ads_read」と入力
4. 「**ads_read**」を見つけて、「**権限を追加**」ボタンをクリック
5. 同様に「ads_management」を検索して、「**権限を追加**」ボタンをクリック

**注意**: 開発モードでは、アプリの管理者のみがこれらの権限を使用できます。

---

## ステップ8: 環境変数を設定

1. プロジェクトの`backend`フォルダを開く
2. `.env`ファイルを開く（テキストエディタで）
3. ファイルの最後に以下を追加：

```bash
# Meta OAuth設定
META_APP_ID=ここにステップ3でコピーしたApp IDを貼り付け
META_APP_SECRET=ここにステップ4でコピーしたApp Secretを貼り付け
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

**例**:
```bash
# Meta OAuth設定
META_APP_ID=1234567890123456
META_APP_SECRET=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

4. ファイルを保存

---

## ステップ9: バックエンドサーバーを再起動

1. バックエンドサーバーが起動している場合は、停止する（Ctrl+C）
2. ターミナルで以下を実行：

```bash
cd backend
./venv/bin/python3 -m uvicorn app.main:app --host 127.0.0.1 --port 8000 --reload
```

3. サーバーが起動したことを確認（エラーが出ないこと）

---

## ステップ10: 動作確認

1. ブラウザで `http://localhost:3000` を開く
2. ログインする
3. 左側のメニューから「**設定**」をクリック
4. ページを下にスクロールして「**Meta広告アカウント連携**」セクションを見つける
5. 「**Metaでログインして連携**」という青いボタンをクリック
6. Metaのログイン画面が表示されることを確認
7. Metaアカウントでログイン
8. 「**続行**」または「**許可**」ボタンをクリック
9. 設定画面に戻り、「**Meta広告アカウントID**」の欄に`act_`で始まるIDが自動入力されていることを確認

---

## エラーが出た場合

### エラー: "Meta OAuthが設定されていません"

**やること**:
1. `backend/.env`ファイルを開く
2. `META_APP_ID=`の後に数字が入っているか確認
3. 入っていない場合は、ステップ8をやり直す
4. バックエンドサーバーを再起動（ステップ9）

### エラー: "Invalid redirect_uri"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「製品」→「Facebook Login」→「設定」を開く
3. 「有効なOAuthリダイレクトURI」に以下が**完全に一致**しているか確認：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
4. 一致していない場合は、正しく入力して「変更を保存」

### エラー: "Insufficient permissions"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「アプリレビュー」→「権限と機能」を開く
3. `ads_read`と`ads_management`が追加されているか確認
4. 追加されていない場合は、ステップ7をやり直す

### エラー: "広告アカウントが見つかりませんでした"

**やること**:
1. https://business.facebook.com/adsmanager/ にアクセス
2. 広告アカウントが存在するか確認
3. 存在しない場合は、広告アカウントを作成する

---

## 完了

これで設定は完了です。ユーザーは「Metaでログインして連携」ボタンをクリックするだけで、Metaアカウントを連携できるようになります。

## 前提条件
- Meta（Facebook）アカウントを持っていること
- 広告アカウントを持っていること（または作成できること）

---

## ステップ1: Meta for Developersにアクセス

1. ブラウザで以下のURLを開く：
   ```
   https://developers.facebook.com/apps/
   ```

2. Metaアカウントでログインしていない場合は、ログインする

---

## ステップ2: アプリを作成

1. ページ右上の「**アプリを作成**」ボタンをクリック
   - 青いボタンです

2. ポップアップが表示されるので：
   - 「**ビジネス**」を選択
   - 「**次へ**」をクリック

3. アプリ情報を入力：
   - **アプリ名**: 例「MIERU AI」など、任意の名前
   - **アプリの連絡先メール**: あなたのメールアドレス
   - **ビジネスアカウント**: 既存のものを選択、または「新規作成」をクリック

4. 「**アプリを作成**」ボタンをクリック

5. セキュリティチェック（CAPTCHA）が表示されたら、完了する

---

## ステップ3: App IDをコピー

1. アプリダッシュボードが表示される
2. 左側のメニューから「**設定**」をクリック
3. 「**基本設定**」をクリック（設定の下に表示される）
4. ページ上部の「**基本**」セクションに「**アプリID**」が表示される
5. アプリIDの数字をコピー（例: `1234567890123456`）
   - この数字をメモ帳などに保存しておく

---

## ステップ4: App Secretを取得

1. 同じ「基本設定」ページで、下にスクロール
2. 「**アプリシークレット**」というセクションを見つける
3. 「**表示**」ボタンをクリック
4. パスワードを入力して「**送信**」をクリック
5. 表示された文字列をコピー（例: `a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6`）
   - ⚠️ **重要**: この値は一度しか表示されません。必ずメモ帳に保存してください

---

## ステップ5: Facebook Loginを追加

1. 左側のメニューから「**製品**」をクリック
2. 製品一覧の中から「**Facebook Login**」を見つける
3. 「**セットアップ**」ボタンをクリック
4. 設定画面が開く

---

## ステップ6: OAuth Redirect URIを設定

1. Facebook Loginの設定画面で、「**設定**」タブをクリック
2. ページを下にスクロールして「**クライアントOAuth設定**」セクションを見つける
3. 「**有効なOAuthリダイレクトURI**」という項目を見つける
4. テキストボックスに以下を入力：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
5. 「**変更を保存**」ボタンをクリック（ページ下部にある）

---

## ステップ7: 権限を追加

1. 左側のメニューから「**アプリレビュー**」をクリック
2. 「**権限と機能**」をクリック
3. 検索ボックスに「ads_read」と入力
4. 「**ads_read**」を見つけて、「**権限を追加**」ボタンをクリック
5. 同様に「ads_management」を検索して、「**権限を追加**」ボタンをクリック

**注意**: 開発モードでは、アプリの管理者のみがこれらの権限を使用できます。

---

## ステップ8: 環境変数を設定

1. プロジェクトの`backend`フォルダを開く
2. `.env`ファイルを開く（テキストエディタで）
3. ファイルの最後に以下を追加：

```bash
# Meta OAuth設定
META_APP_ID=ここにステップ3でコピーしたApp IDを貼り付け
META_APP_SECRET=ここにステップ4でコピーしたApp Secretを貼り付け
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

**例**:
```bash
# Meta OAuth設定
META_APP_ID=1234567890123456
META_APP_SECRET=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

4. ファイルを保存

---

## ステップ9: バックエンドサーバーを再起動

1. バックエンドサーバーが起動している場合は、停止する（Ctrl+C）
2. ターミナルで以下を実行：

```bash
cd backend
./venv/bin/python3 -m uvicorn app.main:app --host 127.0.0.1 --port 8000 --reload
```

3. サーバーが起動したことを確認（エラーが出ないこと）

---

## ステップ10: 動作確認

1. ブラウザで `http://localhost:3000` を開く
2. ログインする
3. 左側のメニューから「**設定**」をクリック
4. ページを下にスクロールして「**Meta広告アカウント連携**」セクションを見つける
5. 「**Metaでログインして連携**」という青いボタンをクリック
6. Metaのログイン画面が表示されることを確認
7. Metaアカウントでログイン
8. 「**続行**」または「**許可**」ボタンをクリック
9. 設定画面に戻り、「**Meta広告アカウントID**」の欄に`act_`で始まるIDが自動入力されていることを確認

---

## エラーが出た場合

### エラー: "Meta OAuthが設定されていません"

**やること**:
1. `backend/.env`ファイルを開く
2. `META_APP_ID=`の後に数字が入っているか確認
3. 入っていない場合は、ステップ8をやり直す
4. バックエンドサーバーを再起動（ステップ9）

### エラー: "Invalid redirect_uri"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「製品」→「Facebook Login」→「設定」を開く
3. 「有効なOAuthリダイレクトURI」に以下が**完全に一致**しているか確認：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
4. 一致していない場合は、正しく入力して「変更を保存」

### エラー: "Insufficient permissions"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「アプリレビュー」→「権限と機能」を開く
3. `ads_read`と`ads_management`が追加されているか確認
4. 追加されていない場合は、ステップ7をやり直す

### エラー: "広告アカウントが見つかりませんでした"

**やること**:
1. https://business.facebook.com/adsmanager/ にアクセス
2. 広告アカウントが存在するか確認
3. 存在しない場合は、広告アカウントを作成する

---

## 完了

これで設定は完了です。ユーザーは「Metaでログインして連携」ボタンをクリックするだけで、Metaアカウントを連携できるようになります。

## 前提条件
- Meta（Facebook）アカウントを持っていること
- 広告アカウントを持っていること（または作成できること）

---

## ステップ1: Meta for Developersにアクセス

1. ブラウザで以下のURLを開く：
   ```
   https://developers.facebook.com/apps/
   ```

2. Metaアカウントでログインしていない場合は、ログインする

---

## ステップ2: アプリを作成

1. ページ右上の「**アプリを作成**」ボタンをクリック
   - 青いボタンです

2. ポップアップが表示されるので：
   - 「**ビジネス**」を選択
   - 「**次へ**」をクリック

3. アプリ情報を入力：
   - **アプリ名**: 例「MIERU AI」など、任意の名前
   - **アプリの連絡先メール**: あなたのメールアドレス
   - **ビジネスアカウント**: 既存のものを選択、または「新規作成」をクリック

4. 「**アプリを作成**」ボタンをクリック

5. セキュリティチェック（CAPTCHA）が表示されたら、完了する

---

## ステップ3: App IDをコピー

1. アプリダッシュボードが表示される
2. 左側のメニューから「**設定**」をクリック
3. 「**基本設定**」をクリック（設定の下に表示される）
4. ページ上部の「**基本**」セクションに「**アプリID**」が表示される
5. アプリIDの数字をコピー（例: `1234567890123456`）
   - この数字をメモ帳などに保存しておく

---

## ステップ4: App Secretを取得

1. 同じ「基本設定」ページで、下にスクロール
2. 「**アプリシークレット**」というセクションを見つける
3. 「**表示**」ボタンをクリック
4. パスワードを入力して「**送信**」をクリック
5. 表示された文字列をコピー（例: `a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6`）
   - ⚠️ **重要**: この値は一度しか表示されません。必ずメモ帳に保存してください

---

## ステップ5: Facebook Loginを追加

1. 左側のメニューから「**製品**」をクリック
2. 製品一覧の中から「**Facebook Login**」を見つける
3. 「**セットアップ**」ボタンをクリック
4. 設定画面が開く

---

## ステップ6: OAuth Redirect URIを設定

1. Facebook Loginの設定画面で、「**設定**」タブをクリック
2. ページを下にスクロールして「**クライアントOAuth設定**」セクションを見つける
3. 「**有効なOAuthリダイレクトURI**」という項目を見つける
4. テキストボックスに以下を入力：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
5. 「**変更を保存**」ボタンをクリック（ページ下部にある）

---

## ステップ7: 権限を追加

1. 左側のメニューから「**アプリレビュー**」をクリック
2. 「**権限と機能**」をクリック
3. 検索ボックスに「ads_read」と入力
4. 「**ads_read**」を見つけて、「**権限を追加**」ボタンをクリック
5. 同様に「ads_management」を検索して、「**権限を追加**」ボタンをクリック

**注意**: 開発モードでは、アプリの管理者のみがこれらの権限を使用できます。

---

## ステップ8: 環境変数を設定

1. プロジェクトの`backend`フォルダを開く
2. `.env`ファイルを開く（テキストエディタで）
3. ファイルの最後に以下を追加：

```bash
# Meta OAuth設定
META_APP_ID=ここにステップ3でコピーしたApp IDを貼り付け
META_APP_SECRET=ここにステップ4でコピーしたApp Secretを貼り付け
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

**例**:
```bash
# Meta OAuth設定
META_APP_ID=1234567890123456
META_APP_SECRET=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

4. ファイルを保存

---

## ステップ9: バックエンドサーバーを再起動

1. バックエンドサーバーが起動している場合は、停止する（Ctrl+C）
2. ターミナルで以下を実行：

```bash
cd backend
./venv/bin/python3 -m uvicorn app.main:app --host 127.0.0.1 --port 8000 --reload
```

3. サーバーが起動したことを確認（エラーが出ないこと）

---

## ステップ10: 動作確認

1. ブラウザで `http://localhost:3000` を開く
2. ログインする
3. 左側のメニューから「**設定**」をクリック
4. ページを下にスクロールして「**Meta広告アカウント連携**」セクションを見つける
5. 「**Metaでログインして連携**」という青いボタンをクリック
6. Metaのログイン画面が表示されることを確認
7. Metaアカウントでログイン
8. 「**続行**」または「**許可**」ボタンをクリック
9. 設定画面に戻り、「**Meta広告アカウントID**」の欄に`act_`で始まるIDが自動入力されていることを確認

---

## エラーが出た場合

### エラー: "Meta OAuthが設定されていません"

**やること**:
1. `backend/.env`ファイルを開く
2. `META_APP_ID=`の後に数字が入っているか確認
3. 入っていない場合は、ステップ8をやり直す
4. バックエンドサーバーを再起動（ステップ9）

### エラー: "Invalid redirect_uri"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「製品」→「Facebook Login」→「設定」を開く
3. 「有効なOAuthリダイレクトURI」に以下が**完全に一致**しているか確認：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
4. 一致していない場合は、正しく入力して「変更を保存」

### エラー: "Insufficient permissions"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「アプリレビュー」→「権限と機能」を開く
3. `ads_read`と`ads_management`が追加されているか確認
4. 追加されていない場合は、ステップ7をやり直す

### エラー: "広告アカウントが見つかりませんでした"

**やること**:
1. https://business.facebook.com/adsmanager/ にアクセス
2. 広告アカウントが存在するか確認
3. 存在しない場合は、広告アカウントを作成する

---

## 完了

これで設定は完了です。ユーザーは「Metaでログインして連携」ボタンをクリックするだけで、Metaアカウントを連携できるようになります。

## 前提条件
- Meta（Facebook）アカウントを持っていること
- 広告アカウントを持っていること（または作成できること）

---

## ステップ1: Meta for Developersにアクセス

1. ブラウザで以下のURLを開く：
   ```
   https://developers.facebook.com/apps/
   ```

2. Metaアカウントでログインしていない場合は、ログインする

---

## ステップ2: アプリを作成

1. ページ右上の「**アプリを作成**」ボタンをクリック
   - 青いボタンです

2. ポップアップが表示されるので：
   - 「**ビジネス**」を選択
   - 「**次へ**」をクリック

3. アプリ情報を入力：
   - **アプリ名**: 例「MIERU AI」など、任意の名前
   - **アプリの連絡先メール**: あなたのメールアドレス
   - **ビジネスアカウント**: 既存のものを選択、または「新規作成」をクリック

4. 「**アプリを作成**」ボタンをクリック

5. セキュリティチェック（CAPTCHA）が表示されたら、完了する

---

## ステップ3: App IDをコピー

1. アプリダッシュボードが表示される
2. 左側のメニューから「**設定**」をクリック
3. 「**基本設定**」をクリック（設定の下に表示される）
4. ページ上部の「**基本**」セクションに「**アプリID**」が表示される
5. アプリIDの数字をコピー（例: `1234567890123456`）
   - この数字をメモ帳などに保存しておく

---

## ステップ4: App Secretを取得

1. 同じ「基本設定」ページで、下にスクロール
2. 「**アプリシークレット**」というセクションを見つける
3. 「**表示**」ボタンをクリック
4. パスワードを入力して「**送信**」をクリック
5. 表示された文字列をコピー（例: `a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6`）
   - ⚠️ **重要**: この値は一度しか表示されません。必ずメモ帳に保存してください

---

## ステップ5: Facebook Loginを追加

1. 左側のメニューから「**製品**」をクリック
2. 製品一覧の中から「**Facebook Login**」を見つける
3. 「**セットアップ**」ボタンをクリック
4. 設定画面が開く

---

## ステップ6: OAuth Redirect URIを設定

1. Facebook Loginの設定画面で、「**設定**」タブをクリック
2. ページを下にスクロールして「**クライアントOAuth設定**」セクションを見つける
3. 「**有効なOAuthリダイレクトURI**」という項目を見つける
4. テキストボックスに以下を入力：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
5. 「**変更を保存**」ボタンをクリック（ページ下部にある）

---

## ステップ7: 権限を追加

1. 左側のメニューから「**アプリレビュー**」をクリック
2. 「**権限と機能**」をクリック
3. 検索ボックスに「ads_read」と入力
4. 「**ads_read**」を見つけて、「**権限を追加**」ボタンをクリック
5. 同様に「ads_management」を検索して、「**権限を追加**」ボタンをクリック

**注意**: 開発モードでは、アプリの管理者のみがこれらの権限を使用できます。

---

## ステップ8: 環境変数を設定

1. プロジェクトの`backend`フォルダを開く
2. `.env`ファイルを開く（テキストエディタで）
3. ファイルの最後に以下を追加：

```bash
# Meta OAuth設定
META_APP_ID=ここにステップ3でコピーしたApp IDを貼り付け
META_APP_SECRET=ここにステップ4でコピーしたApp Secretを貼り付け
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

**例**:
```bash
# Meta OAuth設定
META_APP_ID=1234567890123456
META_APP_SECRET=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

4. ファイルを保存

---

## ステップ9: バックエンドサーバーを再起動

1. バックエンドサーバーが起動している場合は、停止する（Ctrl+C）
2. ターミナルで以下を実行：

```bash
cd backend
./venv/bin/python3 -m uvicorn app.main:app --host 127.0.0.1 --port 8000 --reload
```

3. サーバーが起動したことを確認（エラーが出ないこと）

---

## ステップ10: 動作確認

1. ブラウザで `http://localhost:3000` を開く
2. ログインする
3. 左側のメニューから「**設定**」をクリック
4. ページを下にスクロールして「**Meta広告アカウント連携**」セクションを見つける
5. 「**Metaでログインして連携**」という青いボタンをクリック
6. Metaのログイン画面が表示されることを確認
7. Metaアカウントでログイン
8. 「**続行**」または「**許可**」ボタンをクリック
9. 設定画面に戻り、「**Meta広告アカウントID**」の欄に`act_`で始まるIDが自動入力されていることを確認

---

## エラーが出た場合

### エラー: "Meta OAuthが設定されていません"

**やること**:
1. `backend/.env`ファイルを開く
2. `META_APP_ID=`の後に数字が入っているか確認
3. 入っていない場合は、ステップ8をやり直す
4. バックエンドサーバーを再起動（ステップ9）

### エラー: "Invalid redirect_uri"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「製品」→「Facebook Login」→「設定」を開く
3. 「有効なOAuthリダイレクトURI」に以下が**完全に一致**しているか確認：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
4. 一致していない場合は、正しく入力して「変更を保存」

### エラー: "Insufficient permissions"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「アプリレビュー」→「権限と機能」を開く
3. `ads_read`と`ads_management`が追加されているか確認
4. 追加されていない場合は、ステップ7をやり直す

### エラー: "広告アカウントが見つかりませんでした"

**やること**:
1. https://business.facebook.com/adsmanager/ にアクセス
2. 広告アカウントが存在するか確認
3. 存在しない場合は、広告アカウントを作成する

---

## 完了

これで設定は完了です。ユーザーは「Metaでログインして連携」ボタンをクリックするだけで、Metaアカウントを連携できるようになります。

## 前提条件
- Meta（Facebook）アカウントを持っていること
- 広告アカウントを持っていること（または作成できること）

---

## ステップ1: Meta for Developersにアクセス

1. ブラウザで以下のURLを開く：
   ```
   https://developers.facebook.com/apps/
   ```

2. Metaアカウントでログインしていない場合は、ログインする

---

## ステップ2: アプリを作成

1. ページ右上の「**アプリを作成**」ボタンをクリック
   - 青いボタンです

2. ポップアップが表示されるので：
   - 「**ビジネス**」を選択
   - 「**次へ**」をクリック

3. アプリ情報を入力：
   - **アプリ名**: 例「MIERU AI」など、任意の名前
   - **アプリの連絡先メール**: あなたのメールアドレス
   - **ビジネスアカウント**: 既存のものを選択、または「新規作成」をクリック

4. 「**アプリを作成**」ボタンをクリック

5. セキュリティチェック（CAPTCHA）が表示されたら、完了する

---

## ステップ3: App IDをコピー

1. アプリダッシュボードが表示される
2. 左側のメニューから「**設定**」をクリック
3. 「**基本設定**」をクリック（設定の下に表示される）
4. ページ上部の「**基本**」セクションに「**アプリID**」が表示される
5. アプリIDの数字をコピー（例: `1234567890123456`）
   - この数字をメモ帳などに保存しておく

---

## ステップ4: App Secretを取得

1. 同じ「基本設定」ページで、下にスクロール
2. 「**アプリシークレット**」というセクションを見つける
3. 「**表示**」ボタンをクリック
4. パスワードを入力して「**送信**」をクリック
5. 表示された文字列をコピー（例: `a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6`）
   - ⚠️ **重要**: この値は一度しか表示されません。必ずメモ帳に保存してください

---

## ステップ5: Facebook Loginを追加

1. 左側のメニューから「**製品**」をクリック
2. 製品一覧の中から「**Facebook Login**」を見つける
3. 「**セットアップ**」ボタンをクリック
4. 設定画面が開く

---

## ステップ6: OAuth Redirect URIを設定

1. Facebook Loginの設定画面で、「**設定**」タブをクリック
2. ページを下にスクロールして「**クライアントOAuth設定**」セクションを見つける
3. 「**有効なOAuthリダイレクトURI**」という項目を見つける
4. テキストボックスに以下を入力：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
5. 「**変更を保存**」ボタンをクリック（ページ下部にある）

---

## ステップ7: 権限を追加

1. 左側のメニューから「**アプリレビュー**」をクリック
2. 「**権限と機能**」をクリック
3. 検索ボックスに「ads_read」と入力
4. 「**ads_read**」を見つけて、「**権限を追加**」ボタンをクリック
5. 同様に「ads_management」を検索して、「**権限を追加**」ボタンをクリック

**注意**: 開発モードでは、アプリの管理者のみがこれらの権限を使用できます。

---

## ステップ8: 環境変数を設定

1. プロジェクトの`backend`フォルダを開く
2. `.env`ファイルを開く（テキストエディタで）
3. ファイルの最後に以下を追加：

```bash
# Meta OAuth設定
META_APP_ID=ここにステップ3でコピーしたApp IDを貼り付け
META_APP_SECRET=ここにステップ4でコピーしたApp Secretを貼り付け
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

**例**:
```bash
# Meta OAuth設定
META_APP_ID=1234567890123456
META_APP_SECRET=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6
META_OAUTH_REDIRECT_URI=http://localhost:3000/settings?meta_oauth=callback
```

4. ファイルを保存

---

## ステップ9: バックエンドサーバーを再起動

1. バックエンドサーバーが起動している場合は、停止する（Ctrl+C）
2. ターミナルで以下を実行：

```bash
cd backend
./venv/bin/python3 -m uvicorn app.main:app --host 127.0.0.1 --port 8000 --reload
```

3. サーバーが起動したことを確認（エラーが出ないこと）

---

## ステップ10: 動作確認

1. ブラウザで `http://localhost:3000` を開く
2. ログインする
3. 左側のメニューから「**設定**」をクリック
4. ページを下にスクロールして「**Meta広告アカウント連携**」セクションを見つける
5. 「**Metaでログインして連携**」という青いボタンをクリック
6. Metaのログイン画面が表示されることを確認
7. Metaアカウントでログイン
8. 「**続行**」または「**許可**」ボタンをクリック
9. 設定画面に戻り、「**Meta広告アカウントID**」の欄に`act_`で始まるIDが自動入力されていることを確認

---

## エラーが出た場合

### エラー: "Meta OAuthが設定されていません"

**やること**:
1. `backend/.env`ファイルを開く
2. `META_APP_ID=`の後に数字が入っているか確認
3. 入っていない場合は、ステップ8をやり直す
4. バックエンドサーバーを再起動（ステップ9）

### エラー: "Invalid redirect_uri"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「製品」→「Facebook Login」→「設定」を開く
3. 「有効なOAuthリダイレクトURI」に以下が**完全に一致**しているか確認：
   ```
   http://localhost:3000/settings?meta_oauth=callback
   ```
4. 一致していない場合は、正しく入力して「変更を保存」

### エラー: "Insufficient permissions"

**やること**:
1. Meta for Developersに戻る
2. 左メニュー「アプリレビュー」→「権限と機能」を開く
3. `ads_read`と`ads_management`が追加されているか確認
4. 追加されていない場合は、ステップ7をやり直す

### エラー: "広告アカウントが見つかりませんでした"

**やること**:
1. https://business.facebook.com/adsmanager/ にアクセス
2. 広告アカウントが存在するか確認
3. 存在しない場合は、広告アカウントを作成する

---

## 完了

これで設定は完了です。ユーザーは「Metaでログインして連携」ボタンをクリックするだけで、Metaアカウントを連携できるようになります。
