# Meta広告アカウントID取得ガイド

## 広告アカウントIDとは

広告アカウントIDは、Meta広告アカウントを識別するためのIDです。
- 形式: `act_`で始まる数字（例: `act_123456789`）
- 用途: Meta APIで広告データを取得する際に必要

## 個人アカウント vs ビジネスポートフォリオ

### 個人アカウントの広告アカウント
- **特徴**: 個人のFacebookアカウントで作成した広告アカウント
- **アカウントID**: `act_`で始まる形式（個人アカウントでも同じ形式）
- **使用可能**: 個人アカウントでも広告アカウントIDは取得可能
- **メリット**: 簡単に作成・使用できる
- **デメリット**: 複数人での管理が難しい

### ビジネスポートフォリオ（ビジネスマネージャー）の広告アカウント
- **特徴**: ビジネスマネージャーにリンクされた広告アカウント
- **アカウントID**: `act_`で始まる形式（形式は同じ）
- **使用可能**: ビジネスマネージャーにアクセス権限があれば使用可能
- **メリット**: 複数人での管理が容易、権限管理が細かく設定可能
- **デメリット**: セットアップが少し複雑

### どちらを使うべきか？

**推奨**: 
- **個人で使用する場合**: 個人アカウントの広告アカウントIDで問題ありません
- **チームで使用する場合**: ビジネスポートフォリオの広告アカウントIDを推奨

**重要**: 
- どちらのアカウントIDでも、n8nでデータ取得は可能です
- アカウントIDの形式は同じ（`act_`で始まる）
- アクセス権限があれば、どちらでも使用可能

---

## 広告アカウントIDの確認方法

### 方法1: Meta広告マネージャーで確認（最も簡単）

#### 手順
1. [Meta広告マネージャー](https://business.facebook.com/adsmanager/)にアクセス
2. ログイン（必要に応じて）
3. 左上のアカウントセレクターをクリック
4. アカウント一覧が表示される
5. 各アカウントの下に「アカウントID: act_123456789」のように表示される

#### スクリーンショットの目安
- 左上に「アカウント」というドロップダウンがある
- クリックするとアカウント一覧が表示される
- 各アカウント名の下に「アカウントID: act_XXXXX」と表示される

---

### 方法2: Graph API Explorerで確認

#### 手順
1. [Meta for Developers](https://developers.facebook.com/)にアクセス
2. 作成したアプリを選択
3. 「Tools」→「Graph API Explorer」を開く
4. 右上の「Generate Access Token」をクリック
5. 必要な権限（`ads_read`など）を選択してトークンを生成
6. 以下のクエリを実行：

```
GET /me/adaccounts
```

または

```
GET /me?fields=adaccounts
```

#### レスポンス例
```json
{
  "data": [
    {
      "account_id": "123456789",
      "id": "act_123456789",
      "name": "広告アカウント名"
    }
  ]
}
```

7. `id`フィールドの値（`act_123456789`）が広告アカウントID

---

### 方法3: Metaビジネススイートで確認

#### 手順
1. [Metaビジネススイート](https://business.facebook.com/)にアクセス
2. 「広告アカウント」を選択
3. 広告アカウント一覧が表示される
4. 各アカウントの「設定」をクリック
5. 「アカウント情報」でアカウントIDを確認

---

## 広告アカウントIDの形式

### 正しい形式
- `act_123456789`（`act_` + 数字）
- 数字部分は通常9桁以上

### 間違った形式
- `123456789`（`act_`がない）
- `account_123456789`（`act_`ではない）

---

## n8nでの使用方法

### Facebook Graph APIノードでの設定

1. **Node**フィールドに広告アカウントIDを入力
   - 例: `act_123456789`
   - **重要**: `act_`を含めて完全に入力

2. **Edge**フィールドに`insights`を入力

3. **Graph API Version**を選択（例: `v18.0`）

### 設定例

```
Node: act_123456789
Edge: insights
Graph API Version: v18.0
HTTP Request Method: GET
```

---

## 複数の広告アカウントがある場合

複数の広告アカウントがある場合：
1. すべてのアカウントIDを確認
2. 必要なアカウントのIDを使用
3. 複数のアカウントからデータを取得する場合は、ワークフローを複数作成するか、ループ処理を追加

---

## トラブルシューティング

### アカウントIDが見つからない
- Meta広告マネージャーにアクセスできるか確認
- 広告アカウントが作成されているか確認
- アカウントへのアクセス権限があるか確認

### エラーが発生する
- アカウントIDの形式が正しいか確認（`act_`で始まるか）
- トークンに`ads_read`権限があるか確認
- アカウントへのアクセス権限があるか確認

### データが取得できない
- アカウントIDが正しいか確認
- トークンが有効か確認
- 時間範囲が正しいか確認

---

## 参考リンク

- [Meta広告マネージャー](https://business.facebook.com/adsmanager/)
- [Metaビジネススイート](https://business.facebook.com/)
- [Graph API Explorer](https://developers.facebook.com/tools/explorer/)
- [Marketing API ドキュメント](https://developers.facebook.com/docs/marketing-apis)

